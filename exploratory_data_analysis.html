<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="" />


<title>exploratory_data_analysis.knit</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data_preparation.html">Data Preparation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="exploratory_data_analysis.html">Exploratory Analysis</a>
    </li>
    <li>
      <a href="predictor_outcome_associations.html">Predictor-Outcome Association</a>
    </li>
    <li>
      <a href="modelling.html">Modelling</a>
    </li>
  </ul>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="visualization.html">Visualizations</a>
</li>
<li>
  <a href="http://github.com/naomi-sk">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<div id="exploratory-data-analysis" class="section level1">
<h1>Exploratory Data Analysis</h1>
<div id="ed-visits-and-hospitalizations-between-2016-2018-and-2019-2021"
class="section level4">
<h4>ED Visits and Hospitalizations between 2016-2018 and 2019-2021</h4>
<pre class="r"><code># Load ED data for 2016-2018

ed_2016_2018 = 
  read_csv(&quot;data/ed_2016_2018.csv&quot;)

# Load ED data for 2019-2021

ed_2019_2021 = 
  read_csv(&quot;data/ed_2019_2021.csv&quot;)

# Load NYC zipcode shapefile

nyc_zip_sf &lt;- st_read(&quot;shapefiles/geo_export_8df5c38c-c74c-4840-9d00-da16c0201e07.shp&quot;, quiet = TRUE)

# Combine datasets

all_data &lt;- bind_rows(
  ed_2016_2018 %&gt;% mutate(period = &quot;2016-2018&quot;),
  ed_2019_2021 %&gt;% mutate(period = &quot;2019-2021&quot;)
)

# Create borough averages for both indicators

borough_data &lt;- all_data %&gt;%
  group_by(borough, period, indicator) %&gt;%
  summarize(avg_rate = mean(zip_code_rate, na.rm = TRUE))

# Create the map_data

borough_data &lt;- borough_data %&gt;%
  rename(boro_name = borough)

map_data &lt;- nyc_zip_sf %&gt;%
  left_join(borough_data, by = &quot;boro_name&quot;)</code></pre>
</div>
<div
id="emergency-department-visit-rates-per-10000-children-aged-0-17-years"
class="section level4">
<h4>Emergency Department Visit Rates per 10,000 children (Aged 0-17
Years)</h4>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">% Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">347.7</td>
<td align="right">180.7</td>
<td align="right">-48.0</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">184.4</td>
<td align="right">100.5</td>
<td align="right">-45.5</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">162.2</td>
<td align="right">85.0</td>
<td align="right">-47.6</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">119.8</td>
<td align="right">63.6</td>
<td align="right">-46.9</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">93.7</td>
<td align="right">52.9</td>
<td align="right">-43.5</td>
</tr>
</tbody>
</table>
<p>For ED visits, the Bronx had notably higher rates than other boroughs
in both periods, with 347.7 and 180.7 per 10,000 children, respectively.
All boroughs experienced substantial decreases between 2016-2018 and
2019-2021, ranging from about 43% to 48%. Despite these decreases, the
Bronx’s 2019-2021 rate of 180.7 remained higher than any other borough’s
rates from 2016-2018.</p>
<pre class="r"><code># Create ED Visits Map 

ed_plot &lt;- ggplot() +
  geom_sf(data = filter(map_data, indicator == &quot;ed_visits_rate&quot;), 
          aes(fill = avg_rate)) +
  facet_wrap(~period) +
  scale_fill_viridis_c(
    name = &quot;Borough Average of\nED Visit Rates\nper 10,000 Children\nAged 0-17 Years&quot;, 
    option = &quot;plasma&quot;
  ) +
  theme_minimal() +
  labs(title = &quot;Asthma ED Visit Rates by NYC Borough&quot;,
       subtitle = &quot;Children aged 0-17 years&quot;) +
  theme(
    plot.title = element_text(size = 12),
    legend.position = &quot;right&quot;,
    legend.key.height = unit(2, &quot;cm&quot;),
    axis.text = element_blank(),      
    axis.ticks = element_blank(),     
    panel.grid = element_blank()      
  )

# Display plot

ed_plot</code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Looking at the ED visit rates map across the two time periods
(2016-2018 and 2019-2021), we can observe several key patterns:</p>
<ul>
<li>There appears to be a general decrease in ED visit rates from
2016-2018 to 2019-2021 across most NYC boroughs, as indicated by the
darker purple colors in the later period.</li>
<li>The Bronx (the northernmost borough) shows notably higher ED visit
rates than other boroughs in both time periods, with rates exceeding 300
per 10,000 children aged 0-17 years in 2016-2018.</li>
<li>Manhattan and Brooklyn by comparison appear to have moderate rates,
while Staten Island (the southernmost borough) consistently shows lower
ED visit rates in both periods.</li>
</ul>
<p>The most striking change between the two periods is the apparent
reduction in ED visits during 2019-2021, which could potentially be
related to the COVID-19 pandemic’s impact on healthcare utilization
patterns.</p>
</div>
<div id="asthma-hospitalization-rate-per-10000-children-aged-0-17-years"
class="section level4">
<h4>Asthma hospitalization rate per 10,000 children (aged 0-17
years)</h4>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">% Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">58.5</td>
<td align="right">36.8</td>
<td align="right">-37.1</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">35.5</td>
<td align="right">24.0</td>
<td align="right">-32.4</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">27.5</td>
<td align="right">16.5</td>
<td align="right">-40.0</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">21.5</td>
<td align="right">13.1</td>
<td align="right">-39.1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">20.6</td>
<td align="right">13.2</td>
<td align="right">-35.9</td>
</tr>
</tbody>
</table>
<p>For hospitalizations, a similar pattern emerged compared to ED visit
rates, with the Bronx having the highest rates at 58.5 and 36.8 per
10,000 children in the two periods. All boroughs showed considerable
decreases between 2016-2018 and 2019-2021, ranging from approximately
32% to 40%. Queens and Staten Island consistently had the lowest
hospitalization rates in both periods.</p>
<pre class="r"><code># Create Hospitalizations Map 

hosp_plot &lt;- ggplot() +
  geom_sf(data = filter(map_data, indicator == &quot;hosp_rate&quot;), 
          aes(fill = avg_rate)) +
  facet_wrap(~period) +
  scale_fill_viridis_c(
    name = &quot;Borough Average of\nHospitalization Rates\nper 10,000 Children\nAged 0-17 Years&quot;, 
    option = &quot;plasma&quot;
  ) +
  theme_minimal() +
  labs(title = &quot;Asthma Hospitalization Rates by NYC Borough&quot;,
       subtitle = &quot;Children aged 0-17 years&quot;) +
  theme(
    plot.title = element_text(size = 12),
    panel.grid = element_blank(),         
    axis.text = element_blank(),           
    axis.ticks = element_blank(),         
    axis.title = element_blank()         
  )

# Display plot

hosp_plot</code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Considering hospitalization rates across the two time periods
(2016-2018 and 2019-2021), there are notable patterns:</p>
<ul>
<li>Similar to ED visits, there appears to be a general decrease in
hospitalization rates from 2016-2018 to 2019-2021 across NYC boroughs,
as shown by the darker purple colors in the later period.</li>
<li>The Bronx again shows notably higher hospitalization rates compared
to other boroughs in both periods, reaching over 50 per 10,000 children
aged 0-17 years in 2016-2018.</li>
<li>Geographic disparities persist in both periods, with Staten Island
consistently showing lower hospitalization rates.</li>
<li>When compared to the ED visit rates, the hospitalization rates are
notably lower (scale of 0-50 versus 0-300), suggesting that while many
children visit the ED for asthma, a smaller proportion require
hospitalization.</li>
</ul>
<p>Overall, the consistent geographic disparities in ED visits and
hospitalizations, particularly the higher rates in the Bronx, confirm
the unequal distribution of child asthma burden across New York City.
This suggests underlying socioeconomic and/or environmental factors
affecting childhood asthma rates across different parts of the city.</p>
</div>
<div id="fine-particulate-matter-pm2.5" class="section level2">
<h2>Fine Particulate Matter (PM2.5)</h2>
<pre class="r"><code># Load PM data

particulate_matter = 
  read_csv(&quot;data/Air_Quality_20231208.csv&quot;)

# Produce tidied PM dataset for analysis

tidy_analysis_pm = 
  particulate_matter |&gt;
  janitor::clean_names() |&gt;
    mutate(
    unique_id = as.character(unique_id),
    indicator_id = as.character(indicator_id),
    geo_join_id = as.character(geo_join_id)) |&gt;
  filter(name == &quot;Fine particles (PM 2.5)&quot;) |&gt;
  filter(time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;,
                            &quot;Annual Average 2018&quot;, &quot;Annual Average 2019&quot;,
                            &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;)) |&gt;
  filter(geo_type_name == &quot;Borough&quot;) |&gt;
  select(-unique_id, -indicator_id, -start_date) |&gt;
    rename(borough = geo_place_name) |&gt;
  mutate(
    period = case_when(
      time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;, &quot;Annual Average 2018&quot;) ~ &quot;2016-2018&quot;,
      time_period %in% c(&quot;Annual Average 2019&quot;, &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;) ~ &quot;2019-2021&quot;
    )
  ) |&gt;
  group_by(borough, period) |&gt;
  summarize(
    average_pm2.5 = mean(data_value, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  pivot_wider(
    names_from = period,
    values_from = average_pm2.5,
    names_prefix = &quot;avg_pm2.5_&quot;
  )</code></pre>
<div id="average-pm2.5-levels-μgm³-between-2016-2018-and-2019-2021"
class="section level4">
<h4>Average PM2.5 Levels (μg/m³) Between 2016-2018 and 2019-2021</h4>
<pre class="r"><code># Plot of average PM2.5 levels by borough between 2016-2018 and 2019-2021

tidy_analysis_pm |&gt;
  pivot_longer(cols = -borough, names_to = &quot;Year_Group&quot;, values_to = &quot;PM2.5&quot;) |&gt; 
  mutate(borough = factor(borough, levels = unique(borough[order(PM2.5)]))) |&gt; 
  ggplot(aes(x = borough, y = PM2.5, fill = Year_Group)) +
  geom_bar(position = &quot;dodge&quot;, stat = &quot;identity&quot;) +
   labs(
    title = &quot;Average PM2.5 Levels by Borough (2016-2018 vs 2019-2021)&quot;,
    x = &quot;Borough&quot;,
    y = &quot;PM2.5 Values&quot;,
    fill = &quot;Year Group&quot;
  ) </code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><strong>Average PM.25 levels across boroughs: 2016-2018 vs
2019-2021</strong></p>
<pre class="r"><code># Print PM2.5 Summary

tidy_analysis_pm_diff &lt;- 
  tidy_analysis_pm |&gt;
  mutate(pm2.5_difference = `avg_pm2.5_2016-2018` - `avg_pm2.5_2019-2021`)

knitr::kable(tidy_analysis_pm_diff, col.names = c(&quot;Borough&quot;, &quot;Average PM2.5 (2016-2018)&quot;, &quot;Average PM2.5 (2019-2021)&quot;, &quot;Difference in PM2.5 Levels&quot;))</code></pre>
<table>
<colgroup>
<col width="15%" />
<col width="27%" />
<col width="27%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">Average PM2.5 (2016-2018)</th>
<th align="right">Average PM2.5 (2019-2021)</th>
<th align="right">Difference in PM2.5 Levels</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">7.573333</td>
<td align="right">6.553333</td>
<td align="right">1.0200000</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">7.490000</td>
<td align="right">6.470000</td>
<td align="right">1.0200000</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">8.716667</td>
<td align="right">7.626667</td>
<td align="right">1.0900000</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">7.060000</td>
<td align="right">6.336667</td>
<td align="right">0.7233333</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">6.683333</td>
<td align="right">5.870000</td>
<td align="right">0.8133333</td>
</tr>
</tbody>
</table>
<p>PM2.5 levels demonstrated consistent declines across all NYC boroughs
between 2016-2018 and 2019-2021, as shown in both the bar plot and
supporting data table. Manhattan maintained the highest concentrations
in both periods (8.72 and 7.63 μg/m³ respectively), which is notably
higher than other boroughs as evident by the tallest bars in the graph.
The magnitude of improvement was remarkably uniform in the Bronx and
Brooklyn, with the table showing identical reductions of 1.02 μg/m³ for
both boroughs, while Queens experienced the smallest decrease at 0.72
μg/m³. Staten Island consistently maintained the lowest PM2.5 levels
among all boroughs, with averages dropping from 6.68 to 5.87 μg/m³, as
evidenced by the shortest bars in the plot.</p>
</div>
<div
id="pm2.5-levels-by-united-hospital-fund-uhf42-neighborhoods-2016-2018-vs.-2019-2021"
class="section level4">
<h4>PM2.5 Levels by United Hospital Fund (UHF42) Neighborhoods,
2016-2018 vs. 2019-2021</h4>
<pre class="r"><code># Load NYC geospatial data

geography = 
  read_excel(&quot;data/geoid_borough_name_nyc.xlsx&quot;) |&gt;
  rename(geo_join_id = ID) |&gt;
  mutate(geo_join_id = 
           as.character(geo_join_id))

# Tidy dataset for geospatial PM analysis

tidy_uhf42_pm = 
  particulate_matter |&gt;
  janitor::clean_names() |&gt;
    mutate(
    unique_id = as.character(unique_id),
    indicator_id = as.character(indicator_id),
    geo_join_id = as.character(geo_join_id)) |&gt;
  filter(name == &quot;Fine particles (PM 2.5)&quot;) |&gt;
  filter(time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;,
                            &quot;Annual Average 2018&quot;, &quot;Annual Average 2019&quot;,
                            &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;)) |&gt;
  filter(geo_type_name == &quot;UHF42&quot;) |&gt;
  select(-unique_id, -indicator_id, -start_date) |&gt;
  mutate(
    period = case_when(
      time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;, &quot;Annual Average 2018&quot;) ~ &quot;2016_2018&quot;,
      time_period %in% c(&quot;Annual Average 2019&quot;, &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;) ~ &quot;2019_2021&quot;
    )
  ) |&gt;
  group_by(geo_place_name, geo_join_id, period) |&gt;
  summarize(
    average_pm2.5 = mean(data_value, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  pivot_wider(
    names_from = period,
    values_from = average_pm2.5,
    names_prefix = &quot;avg_pm2.5_&quot;
  ) 

# Load shapefiles map for UHF data

uhf42_map &lt;- st_read(&quot;data/UHF_42_DOHMH_2009.shp&quot;, quiet = TRUE) 

tidy_uhf42_pm &lt;- 
  tidy_uhf42_pm |&gt;
  rename(UHFCODE = geo_join_id) |&gt;
  mutate(
    UHFCODE = as.double(UHFCODE))

# Combine geospatial data and PM data

map_uhf42 &lt;- 
  uhf42_map |&gt;
  left_join(tidy_uhf42_pm, by = &quot;UHFCODE&quot;) |&gt;
  pivot_longer(cols = starts_with(&quot;avg_pm2.5_&quot;), 
               names_to = &quot;time_period&quot;, 
               values_to = &quot;avg_pm2.5&quot;)

# Produce heat map 

heat_map_pm2.5 &lt;- ggplot() +
  geom_sf(data = map_uhf42, aes(fill = avg_pm2.5)) +
  facet_wrap(~time_period, ncol = 2) +
  scale_fill_viridis_c(option = &quot;plasma&quot;, na.value = &quot;grey50&quot;) +
  labs(
    title = &quot;PM2.5 (ug/m3) Levels by UHF42 Neighborhood&quot;,
    fill = &quot;PM2.5&quot;
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 12),
    legend.position = &quot;right&quot;,
    legend.key.height = unit(2, &quot;cm&quot;),
    panel.grid = element_blank(),          
    axis.text = element_blank(),           
    axis.ticks = element_blank(),         
    axis.title = element_blank()          
  )

# Show heat map for PM2.5 

heat_map_pm2.5</code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Looking at the PM2.5 levels across the two time periods (2016-2018
and 2019-2021), we can observe a general decrease in PM2.5
concentrations across the majority of UHF42 neighborhoods, as shown by
the more prevalent darker purple coloring in the 2019-2021 map
indicating lower levels. Midtown Manhattan shows consistently high PM2.5
levels across both time periods, appearing as yellow and orange areas on
the maps, while Staten Island maintains the lowest PM2.5 levels across
all boroughs, shown by consistent dark purple coloring.</p>
<p>The marked improvement in air quality from 2016-2018 to 2019-2021
likely reflects the impact of the COVID-19 pandemic, which resulted in
significantly reduced traffic and industrial pollution during this
period.</p>
</div>
</div>
<div id="greenspace" class="section level2">
<h2>Greenspace</h2>
<pre class="r"><code># Load greenspace data

greenspace_clean = read_csv(&quot;./data/Parks_Properties_20241126.csv&quot;, na = c(&quot;NA&quot;, &quot;.&quot;, &quot;&quot;)) |&gt;
  janitor::clean_names() |&gt; 
  mutate(
    borough = case_match(borough, #renamed borough according to data dictionary
      &quot;R&quot; ~ &quot;Staten Island&quot;,
      &quot;Q&quot; ~ &quot;Queens&quot;,
      &quot;X&quot; ~ &quot;Bronx&quot;,
      &quot;B&quot; ~ &quot;Brooklyn&quot;,
      &quot;M&quot; ~ &quot;Manhattan&quot;),
    typecategory = as.factor(typecategory), #converted char variables into factors
    borough = as.factor(borough)) |&gt;
  separate(acquisitiondate, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) |&gt;
  select(year, borough, acres, typecategory) |&gt; 
  filter(year &lt; 2022 | is.na(year))</code></pre>
<div id="borough-and-year-comparison" class="section level4">
<h4>Borough and Year Comparison</h4>
<pre class="r"><code># Load 2016-2018 dataset

dataset1_gs = greenspace_clean |&gt;
  filter(year &lt; 2019 | is.na(year)) |&gt; 
  group_by(year, borough) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

dataset1_gs_calc = dataset1_gs |&gt; 
  group_by(borough) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;2016-2018&quot;)

# Load 2019-2021 dataset

dataset2_gs = greenspace_clean |&gt;
  filter(year &lt; 2022 | is.na(year)) |&gt;
  group_by(year, borough) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

dataset2_gs_calc = dataset2_gs |&gt; 
  group_by(borough) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;2019-2021&quot;)

# Combine datasets

total_acres = bind_rows(dataset1_gs_calc, dataset2_gs_calc)
  
# Total acres dataset

Greenspace_data = total_acres |&gt;
  pivot_wider(names_from = year_group,
              values_from = acres_sum)

# Produce plot of greenspace distribution across NYC boroughs

ggplot(total_acres, aes(x = reorder(borough, acres_sum), y = acres_sum, fill = year_group)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;, alpha = 0.7) + 
  labs(x = &quot;Borough&quot;, y = &quot;Greenspace (Total Acres)&quot;, title = &quot;Greenspaces Across Borough by Year Group&quot;) +
  theme_minimal()</code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Analysis of greenspace distribution across NYC boroughs shows
consistent patterns between 2016-2018 and 2019-2021, with notable
differences in total acreage between boroughs. Staten Island maintained
substantially higher greenspace coverage than other boroughs in both
periods, reaching approximately 3,000 total acres in 2019-2021. Queens
ranked second with around 2,200 acres, while Brooklyn and Manhattan
showed moderate levels of greenspace at approximately 1,800 acres
each.</p>
<p>The Bronx consistently had the lowest greenspace coverage, though it
showed a slight increase from around 1,100 acres in 2016-2018 to 1,200
acres in 2019-2021. The ranking of boroughs based on greenspace coverage
was relatively consistent across both time periods, indicating fairly
constant disparities in greenspace access over the time periods of
interest.</p>
</div>
<div id="greenspace-increase" class="section level4">
<h4>Greenspace increase</h4>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">2812.520</td>
<td align="right">3071.240</td>
<td align="right">258.720</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">1130.236</td>
<td align="right">1249.861</td>
<td align="right">119.625</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">2171.277</td>
<td align="right">2182.771</td>
<td align="right">11.494</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">1794.986</td>
<td align="right">1795.942</td>
<td align="right">0.956</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">1715.288</td>
<td align="right">1715.633</td>
<td align="right">0.345</td>
</tr>
</tbody>
</table>
<p>Examining the changes in greenspace between 2016-2018 and 2019-2021,
the data reveals variations in greenspace across boroughs and time
periods. Staten Island exhibited the most significant increase, adding
258.720 acres of greenspace, followed by the Bronx with an addition of
119.625 acres. Queens showed a modest increase of 11.494 acres, while
Brooklyn and Manhattan experienced minimal changes with increases of
only 0.956 and 0.345 acres respectively. These differences may reflect
differences in greenspace development priorities across the city’s
boroughs during this period.</p>
</div>
<div id="greenspace-types" class="section level4">
<h4>Greenspace Types</h4>
<pre class="r"><code># Calculate mean acres for each type category across all years

types_nyc = greenspace_clean |&gt;
  select(-borough) |&gt;
  group_by(typecategory) |&gt;
  summarise(acres_tp = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

# Process data for 2016-2018 period

type1A = greenspace_clean |&gt;
  filter(year &lt; 2019 | is.na(year)) |&gt; 
  group_by(year, borough, typecategory) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

# Calculate total acres by borough and type for 2016-2018

type1B = type1A |&gt; 
  group_by(borough, typecategory) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;year1&quot;) #2016-2018

# Process data for 2019-2021 period

type2A = greenspace_clean |&gt;
  filter(year &lt; 2022 | is.na(year)) |&gt;
  group_by(year, borough, typecategory) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

# Calculate total acres by borough and type for 2019-2021

type2B = type2A |&gt; 
  group_by(borough, typecategory) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;year2&quot;) #2019-2021

# Combine both time periods and calculate total acres by type

binded = bind_rows(type1B, type2B) |&gt;
  group_by(typecategory, year_group) |&gt;
  summarise(acres_total = sum(acres_sum, na.rm = TRUE))

# Create bar plot comparing greenspace types between periods

binded |&gt; 
   mutate(year_group = case_match(year_group,
      &quot;year1&quot; ~ &quot;2016-2018&quot;,
      &quot;year2&quot; ~ &quot;2019-2021&quot;)) |&gt;
  ggplot(aes(x = reorder(typecategory, acres_total), y = acres_total, fill = year_group)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;, width = 0.6) +
  labs(x = &quot;Greenspace Types&quot;, y = &quot;Total Acres&quot;, title = &quot;Total Acres of NYC Greenspace by Type and Year Group&quot;) +
    theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1))</code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Analysis of greenspace types across NYC reveals flagship parks as the
dominant category, representing the largest total acreage in both
2016-2018 and 2019-2021 periods. Community parks and nature areas
represent the second and third largest greenspace types respectively in
both time periods. The distribution of greenspace types remained largely
consistent between the two time periods, with minimal changes in most
categories.</p>
<p>Smaller greenspace types such as gardens, plazas, and historic house
parks account for relatively minimal acreage in comparison to the larger
park categories. Most categories showed slight increases or remained
stable across the two time periods, which suggests efforts towards the
preservation and/or expansion of various greenspace types throughout the
city.</p>
<table>
<thead>
<tr class="header">
<th align="left">Greenspace Type</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Neighborhood Park</td>
<td align="right">910.009</td>
<td align="right">1169.625</td>
<td align="right">259.616</td>
</tr>
<tr class="even">
<td align="left">Managed Sites</td>
<td align="right">483.304</td>
<td align="right">602.398</td>
<td align="right">119.094</td>
</tr>
<tr class="odd">
<td align="left">Nature Area</td>
<td align="right">3084.626</td>
<td align="right">3117.486</td>
<td align="right">32.860</td>
</tr>
<tr class="even">
<td align="left">Undeveloped</td>
<td align="right">190.171</td>
<td align="right">191.357</td>
<td align="right">1.186</td>
</tr>
<tr class="odd">
<td align="left">Waterfront Facility</td>
<td align="right">2277.161</td>
<td align="right">2277.691</td>
<td align="right">0.530</td>
</tr>
<tr class="even">
<td align="left">Garden</td>
<td align="right">17.201</td>
<td align="right">17.600</td>
<td align="right">0.399</td>
</tr>
<tr class="odd">
<td align="left">Playground</td>
<td align="right">137.855</td>
<td align="right">138.154</td>
<td align="right">0.299</td>
</tr>
</tbody>
</table>
<p>Between 2016-2018 and 2019-2021, neighborhood parks showed the
largest expansion with an increase of 259.617 acres, followed by managed
sites which grew by 119.095 acres. Nature areas experienced a notable
increase of 32.860 acres, while undeveloped spaces, waterfront
facilities, gardens, and playgrounds showed minimal changes, with
increases ranging from 0.299 to 1.186 acres. The remaining 14 greenspace
types maintained their original acreage with no changes observed during
this period. This pattern indicates that recent greenspace development
has primarily focused on expanding neighborhood parks and managed sites
while preserving existing spaces in other categories.</p>
<p><strong>Top 3 Greenspace Types (Total Acres) Across
Boroughs</strong></p>
<table>
<colgroup>
<col width="14%" />
<col width="26%" />
<col width="31%" />
<col width="28%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="left">Highest</th>
<th align="left">Second Highest</th>
<th align="left">Third Highest</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="left">Flagship Park (1532.62)</td>
<td align="left">Parkway (585.51)</td>
<td align="left">Nature Area (312.15)</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="left">Community Park (1487.77)</td>
<td align="left">Parkway (827.95)</td>
<td align="left">Flagship Park (571.31)</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="left">Flagship Park (1631.46)</td>
<td align="left">Waterfront Facility (1093.79)</td>
<td align="left">Community Park (973.11)</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="left">Community Park (1098.39)</td>
<td align="left">Flagship Park (1094.31)</td>
<td align="left">Neighborhood Park (207.73)</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="left">Nature Area (1690.97)</td>
<td align="left">Community Park (1371.96)</td>
<td align="left">Flagship Park (760.79)</td>
</tr>
</tbody>
</table>
<p>The table shows the top three greenspace types by total acreage
across New York City’s five boroughs, revealing distinct patterns in how
each borough maintains its green spaces. Staten Island has the largest
single greenspace with a Nature Area of 1690.97 acres, showing a focus
on preserving natural environments. Manhattan maintains relatively
smaller spaces, with its largest being a Community Park at 1098.39
acres. The outer boroughs feature major destination parks called
Flagship Parks - which NYC Parks targets for long-term planning and
community input.</p>
<p>The Bronx and Brooklyn both incorporate significant Parkway acreage
as part of New York State’s historic system of landscaped roads. Queens
stands out with the largest Flagship Park (1631.46 acres), while
Brooklyn shows diversity in its green spaces with both large Community
Parks and Parkways.</p>
</div>
</div>
<div id="temperature" class="section level2">
<h2>Temperature</h2>
<pre class="r"><code># Load raw temperature data for each borough

manhattan = read_csv(&quot;data/manhattan.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Manhattan&quot;) |&gt; 
  janitor::clean_names()

bronx = read_csv(&quot;data/bronx.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Bronx&quot;) |&gt; 
  janitor::clean_names()

brooklyn = read_csv(&quot;data/brooklyn.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Brooklyn&quot;) |&gt; 
  janitor::clean_names()

queens = read_csv(&quot;data/queens.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Queens&quot;) |&gt; 
  janitor::clean_names()

staten_island = read_csv(&quot;data/staten_island.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Staten Island&quot;) |&gt; 
  janitor::clean_names()</code></pre>
<pre class="r"><code>all_temp = bind_rows(manhattan, bronx, brooklyn, queens, staten_island) |&gt; 
  mutate(borough = as.factor(borough)) |&gt; 
  mutate(date = as.Date(time, format = &quot;%d/%m/%Y&quot;)) |&gt; 
  select(time:temperature_2m_mean, borough, date) |&gt; 
  mutate(years = year(date)) |&gt; 
  mutate(months = as.Date(paste0(format(date, &quot;%Y-%m&quot;), &quot;-01&quot;), format = &quot;%Y-%m-%d&quot;))

all_temp_borough = all_temp |&gt; 
  mutate(date = as.Date(time, format = &quot;%d/%m/%Y&quot;)) |&gt;  # Corrected date format
  mutate(data_years = ifelse(year(date) %in% 2016:2018, &quot;2016-2018&quot;, &quot;2019-2021&quot;)) |&gt; 
  select(temperature_2m_max:data_years) |&gt; 
  group_by(data_years, borough) |&gt; 
  summarise(avg_temperature = mean(temperature_2m_mean, na.rm = TRUE))</code></pre>
<div id="monthly-mean-temperature-by-borough" class="section level4">
<h4>Monthly Mean temperature by borough</h4>
<p>This graph shows the monthly mean temperature change by Borough
between 2016 and 2021.</p>
<pre class="r"><code># Monthly Mean temperature

all_temp_month = all_temp |&gt; 
  group_by(months, borough) |&gt; 
  summarise(avg_month = mean(temperature_2m_mean, na.rm = TRUE))

ggplot(all_temp_month, aes(x = months, y = avg_month, color = borough)) +
  geom_line() +
  geom_point() +
  labs(
    title = &quot;Monthly Mean Temperature (2016-2021) by Borough&quot;,
    x = &quot;Month&quot;,
    y = &quot;Average Temperature (°C)&quot;,
    color = &quot;Borough&quot;
  ) +
  theme_minimal()</code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
<div id="max-min-mean-temperature-trend-by-year-and-borough"
class="section level4">
<h4>Max, Min, Mean temperature trend by year and borough</h4>
<p>This 5 plots shows the highest temperature mean, lowest temperature
mean, and total mean temperature by year and borough.</p>
<pre class="r"><code># Max, Min, Mean temperature trend by year and borough

mean_temp_year = all_temp |&gt; 
  group_by(years, borough) |&gt; 
  summarize(
    high_temp = mean(temperature_2m_max, na.rm = TRUE),
    low_temp = mean(temperature_2m_min, na.rm = TRUE),
    mean_temp = mean(temperature_2m_mean, na.rm = TRUE)
  ) |&gt; 
  arrange(years, borough) 


long_data &lt;- mean_temp_year |&gt; 
  pivot_longer(
    cols = c(high_temp, low_temp, mean_temp),
    names_to = &quot;Temperature_Type&quot;,            
    values_to = &quot;Temperature&quot;             
  )

ggplot(long_data, aes(x = years, y = Temperature, color = Temperature_Type, group = Temperature_Type)) +
  geom_line(size = 1) +                   
  geom_point(size = 2) +              
  labs(
    title = &quot;Mean Temperature Trends by Year and Borough&quot;,
    x = &quot;Year&quot;,
    y = &quot;Temperature (°C)&quot;,       
    color = &quot;Mean Temperature Type&quot;
  ) +
    scale_color_manual(
    values = c(&quot;high_temp&quot; = &quot;red&quot;, &quot;low_temp&quot; = &quot;blue&quot;, &quot;mean_temp&quot; = &quot;darkgreen&quot;), # Color mapping
    labels = c(&quot;high_temp&quot; = &quot;Highest Temperature&quot;, 
               &quot;low_temp&quot; = &quot;Lowest Temperature&quot;, 
               &quot;mean_temp&quot; = &quot;Mean Temperature&quot;)) +
  theme_minimal() +                    
  facet_wrap(~ borough)  </code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
<div id="average-temperature-change-by-borough" class="section level4">
<h4>Average temperature change by borough</h4>
<p>There has been mean temperature change between years but it is steady
overall across the boroughs.</p>
<pre class="r"><code>#average temperature table

mean_temp_table = mean_temp_year |&gt; 
  select(borough, years, mean_temp) |&gt; 
  pivot_wider(
    names_from = borough,
    values_from = mean_temp
  )

knitr::kable(mean_temp_table)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">years</th>
<th align="right">Bronx</th>
<th align="right">Brooklyn</th>
<th align="right">Manhattan</th>
<th align="right">Queens</th>
<th align="right">Staten Island</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2016</td>
<td align="right">12.49891</td>
<td align="right">12.75929</td>
<td align="right">12.39290</td>
<td align="right">12.66175</td>
<td align="right">12.70710</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">12.23123</td>
<td align="right">12.40219</td>
<td align="right">12.15260</td>
<td align="right">12.14411</td>
<td align="right">12.39288</td>
</tr>
<tr class="odd">
<td align="right">2018</td>
<td align="right">12.08466</td>
<td align="right">12.11808</td>
<td align="right">11.93342</td>
<td align="right">11.94959</td>
<td align="right">12.14192</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="right">11.98082</td>
<td align="right">12.12384</td>
<td align="right">11.85068</td>
<td align="right">11.86000</td>
<td align="right">12.09753</td>
</tr>
<tr class="odd">
<td align="right">2020</td>
<td align="right">12.86639</td>
<td align="right">12.95492</td>
<td align="right">12.68251</td>
<td align="right">12.72459</td>
<td align="right">12.85464</td>
</tr>
<tr class="even">
<td align="right">2021</td>
<td align="right">12.65096</td>
<td align="right">12.76575</td>
<td align="right">12.56630</td>
<td align="right">12.54767</td>
<td align="right">12.75479</td>
</tr>
</tbody>
</table>
</div>
<div id="average-temperature-by-year-group-and-borough"
class="section level4">
<h4>Average temperature by year group and borough</h4>
<p>In terms of analysis by the year group 2016-2018 and 2019-2021. There
has been mean temperature increase among all boroughs. Manhattan and
Bronx showed the biggest increase.</p>
<pre class="r"><code>ggplot(data = all_temp_borough, aes(x = data_years, y = avg_temperature, color = borough)) +
  geom_point(size = 3) +
  geom_line(aes(group = borough), size = 1) +
  labs(title = &quot;Average Temperature by Date Group and Borough&quot;,
       x = &quot;Date Group&quot;,
       y = &quot;Average Temperature&quot;) +
  theme_minimal()</code></pre>
<p><img src="exploratory_data_analysis_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
