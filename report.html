<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="" />


<title>Report</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data_preparation.html">Data Preparation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="exploratory_data_analysis.html">Exploratory Analysis</a>
    </li>
    <li>
      <a href="predictor_outcome_associations.html">Predictor-Outcome Association</a>
    </li>
    <li>
      <a href="modelling.html">Modelling</a>
    </li>
  </ul>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="visualization.html">Visualizations</a>
</li>
<li>
  <a href="https://github.com/naomi-sk/p8105_nyc_child_asthma">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Report</h1>
<h4 class="author"></h4>

</div>


<div
id="group-members-shayne-estillske2118-woojin-shinws2721-naomi-simon-kumarns3782-serena-tingsjt2164"
class="section level4">
<h4>Group members: Shayne Estill(ske2118), Woojin Shin(ws2721), Naomi
Simon-Kumar(ns3782), Serena Ting(sjt2164)</h4>
</div>
<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>Children’s health and development is impacted by the surrounding
environment, particularly in dense urban environments like New York City
(NYC). Poor air quality due to urban air pollution can influence and
have long-term consequences for child and adolescent respiratory health.
The challenges of urban environmental health are further complicated by
climate change, particularly through the urban heat island effect, which
can increase the risk of heat-related illnesses (Heaviside et al.,
2017). Limited research shows that elevated temperatures due to the
urban heat island effect are associated with increased emergency
department (ED) visits among children (Sheffield et al., 2018).</p>
<p>These health outcomes may be influenced by the availability of green
spaces, which can help filter air pollutants and provide cooler areas
for shelter from heat. Importantly, environmental health risks
disproportionately affect children from low-income neighborhoods and
communities of color, where there is often limited access to green
spaces and higher exposure to environmental stressors (Corburn et al.,
2006).</p>
<p>Through this project, we aim to investigate how these interconnected
environmental determinants- air quality, green space availability, and
urban heat patterns - vary across NYC boroughs and their potential
associations with children’s health, specifically focusing on ED asthma
admissions and hospitalizations. We believe that understanding these
relationships is crucial for informing urban planning policies and
public health initiatives aimed at improving children’s health in New
York City.</p>
</div>
<div id="initial-questions" class="section level1">
<h1>Initial Questions</h1>
<div
id="how-do-pediatric-asthma-outcomes-and-environmental-factors-vary-across-nyc"
class="section level4">
<h4>1. How do pediatric asthma outcomes and environmental factors vary
across NYC?</h4>
<ul>
<li>How do asthma ED admission and hospitalization rates vary across NYC
boroughs between 2016-2018 and 2019-2021?</li>
<li>What is the distribution of environmental factors (PM2.5,
temperature, greenspace) across NYC during these periods?</li>
</ul>
</div>
<div
id="what-relationships-emerge-between-environmental-factors-and-pediatric-asthma-rates-across-nyc"
class="section level4">
<h4>2. What relationships emerge between environmental factors and
pediatric asthma rates across NYC?</h4>
<ul>
<li>Do areas with higher ED admission and hospitalization rates align
with particular environmental patterns?</li>
<li>Are there geographic clusters where both environmental inequities
and higher asthma rates persist across time periods?</li>
<li>What are the estimated associations between environmental factors
(PM2.5, temperature, greenspace, and Heat Vulnerability Index()) and
pediatric asthma ED rates, accounting for borough-level and temporal
variation?</li>
</ul>
</div>
<div id="main-questions" class="section level4">
<h4>Main Questions</h4>
<ul>
<li>What is the relationship between environmental factors (PM2.5,
temperature, greenspace, Heat Vulnerability Index (HVI)) and pediatric
asthma emergencies?</li>
<li>Which environmental factors show the strongest associations with
pediatric asthma emergencies?</li>
<li>How are these environmental health burdens geographically
distributed across New York City?</li>
<li>Is HVI a good model predictor for pediatric asthma emergencies?</li>
</ul>
</div>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<pre class="r"><code># Load libraries 

library(tidyverse)
library(sf)
library(ggplot2)
library(readxl)
library(broom)
library(patchwork)
library(lmtest)
library(car)</code></pre>
<p>The research project integrated multiple datasets to examine the
relationship between pediatric asthma outcomes and environmental factors
across New York City. Data was sourced from various public health and
environmental databases, with each dataset requiring specific cleaning
and standardization before merging.</p>
<div id="data-sources" class="section level4">
<h4>Data Sources</h4>
<p>The analysis incorporated five primary datasets from different
sources. Pediatric ED admissions and hospitalizations data for the
2016-2021 periods were obtained from the New York State Asthma
Dashboard, providing emergency department visit rates and
hospitalization rates for children aged 0-17 years at both ZIP code and
borough levels. Air quality data, specifically PM2.5 measures, were
obtained from a NYC Kaggle dataset, providing relevant data at both
borough and Community District levels.</p>
<p>Greenspace data through 2021 was sourced from the NYC Open Data
portal, providing park properties and greenspace measurements at the
borough level. Temperature data for 2016-2021 was extracted from the
Open-Meteo historical weather API, including daily temperature
measurements for each borough. The Heat Vulnerability Index data came
from NYC Heat Vulnerability Index Rankings, corresponding with
vulnerability measures at the ZIP code level.</p>
</div>
<div id="data-cleaning-procedures" class="section level4">
<h4>Data Cleaning Procedures</h4>
<p><strong>Pediatric Asthma Data</strong></p>
<p>The pediatric asthma data cleaning process began with standardizing
variable names using the janitor package. The data was filtered to focus
on two key health indicators: emergency department visit rates and
hospitalization rates. Missing values required special handling, with
suppressed data (marked as “s”) and unstable estimates (marked with “*“)
converted to NA. Borough names were standardized for consistency across
datasets, including converting”Kings” to “Brooklyn”. Separate datasets
were created for the 2016-2018 and 2019-2021 time periods.</p>
<p><strong>PM2.5 Data</strong></p>
<p>The PM2.5 data cleaning resulted in several datasets for different
analytical purposes. The first dataset calculated borough-level averages
for the two time periods of interest. A second dataset maintained
community district-level data for visualization purposes. A third
dataset preserved UHF42-level data specifically for to analyze asthma
outcomes. Throughout the cleaning process, geographic identifiers were
standardized, and period averages were calculated for 2016-2018 and
2019-2021.</p>
<p><strong>Greenspace Data</strong></p>
<p>For the greenspace data, borough abbreviations were first recoded to
full names for consistency and variables were converted to appropriate
types. The acquisition dates were separated into component parts for
temporal analysis. The data was then aggregated to calculate total
greenspace acreage by borough for each time period. The final dataset
included only properties acquired before 2022 to be consistent with the
time periods of interest.</p>
<p><strong>Temperature Data</strong></p>
<p>Temperature data processing began with separate extractions for each
borough. Date formats were standardized across all borough datasets.
Average temperatures were calculated by borough and time period to match
the temporal structure of other datasets. The individual borough
datasets were then combined into a unified temperature dataset that
maintained consistency with the project’s overall geographic and
temporal framework.</p>
<p><strong>Heat Vulnerability Index</strong></p>
<p>The Heat Vulnerability Index data required minimal cleaning, focusing
on standardizing ZIP code formats and converting the vulnerability index
to a factor variable. The final cleaned dataset retained only the
essential variables needed for analysis: ZIP code and heat vulnerability
classification.</p>
</div>
<div id="data-merging-strategy" class="section level4">
<h4>Data Merging Strategy</h4>
<p>The creation of the final merged dataset followed a careful
sequential process to maintain data integrity. The foundation was built
by combining the 2016-2018 and 2019-2021 pediatric admissions data.
Temperature data was then merged using borough and time period as keys,
followed by PM2.5 data using the same keys. Greenspace measurements were
incorporated next, again matching on borough and time period. The Heat
Vulnerability Index was the final addition, merged using ZIP code as the
key.</p>
<p>Variable types were subsequently standardized, with categorical
variables converted to factors and rates maintained as numeric values.
Incomplete and missing records were removed to ensure data quality.
Separate datasets were created for emergency department visits and
hospitalizations for focused analysis on different pediatric asthma
outcomes. Borough-level average rates were calculated to enable analysis
at multiple geographic scales.</p>
</div>
<div id="final-dataset-structure" class="section level4">
<h4>Final Dataset Structure</h4>
<p>The resulting merged dataset, saved as “NYC_total.csv”, represents a
comprehensive integration of health outcomes, environmental measures,
and heat vulnerability. It includes emergency department visits and
hospitalization rates, PM2.5 levels, temperature measurements, heat
vulnerability, and greenspace acreage. Geographic identifiers at both
ZIP code and borough levels enable spatial analysis, while time period
indicators allow for temporal comparisons. Borough-level averages
provide geographic information relevant to the planned analysis.</p>
<p>This final dataset is sufficient for addressing our research aims
specific to analyzing pediatric asthma outcomes in relation to
environmental factors and heat vulnerability across New York City’s
boroughs and ZIP codes for the periods 2016-2018 and 2019-2021.</p>
</div>
</div>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<p>Our exploratory analysis examined relevant environmental and health
variables for pediatric asthma across New York City’s five boroughs
between 2016-2018 and 2019-2021. We explored two health indicators:
pediatric asthma emergency department (ED) visits and pediatric asthma
hospitalizations. We further examined three environmental factors of
interest to our research aims, specifically distributions of fine
particulate matter (PM2.5), greenspace, and temperature patterns across
New York City.</p>
<div id="asthma-related-healthcare-utilization" class="section level2">
<h2>Asthma-Related Healthcare Utilization</h2>
<div id="emergency-department-ed-visits" class="section level3">
<h3>Emergency Department (ED) Visits</h3>
<pre class="r"><code># Load ED data for 2016-2018

ed_2016_2018 = 
  read_csv(&quot;data/ed_2016_2018.csv&quot;)

# Load ED data for 2019-2021

ed_2019_2021 = 
  read_csv(&quot;data/ed_2019_2021.csv&quot;)

# Combine datasets

all_data &lt;- bind_rows(
  ed_2016_2018 %&gt;% mutate(period = &quot;2016-2018&quot;),
  ed_2019_2021 %&gt;% mutate(period = &quot;2019-2021&quot;)
)

# Create borough averages for both indicators

borough_data &lt;- all_data %&gt;%
  group_by(borough, period, indicator) %&gt;%
  summarize(avg_rate = mean(zip_code_rate, na.rm = TRUE))

# Create simple borough-level summaries

borough_summary &lt;- all_data %&gt;%
  group_by(borough, period, indicator) %&gt;%
  summarize(
    avg_rate = round(mean(zip_code_rate, na.rm = TRUE), 1),
    .groups = &quot;drop&quot;  
  )

# Table for ED visits 

ed_summary &lt;- borough_summary %&gt;%
  filter(indicator == &quot;ed_visits_rate&quot;) %&gt;%
  pivot_wider(
    names_from = period,
    values_from = avg_rate
  ) %&gt;%
  mutate(
    percent_change = round(((`2019-2021` - `2016-2018`) / `2016-2018` * 100), 1)
  ) %&gt;%
  arrange(desc(`2016-2018`))

# Print ED Visits Summary

ed_summary %&gt;%
  select(-indicator) %&gt;%
  knitr::kable(
    col.names = c(&quot;Borough&quot;, &quot;2016-2018&quot;, &quot;2019-2021&quot;, &quot;% Change&quot;)
  )</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">% Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">347.7</td>
<td align="right">180.7</td>
<td align="right">-48.0</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">184.4</td>
<td align="right">100.5</td>
<td align="right">-45.5</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">162.2</td>
<td align="right">85.0</td>
<td align="right">-47.6</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">119.8</td>
<td align="right">63.6</td>
<td align="right">-46.9</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">93.7</td>
<td align="right">52.9</td>
<td align="right">-43.5</td>
</tr>
</tbody>
</table>
<p><strong>Table 1. Borough Average Asthma ED Visit Rates per 10,000
Children (aged 0-17 Years)</strong></p>
<pre class="r"><code># Load NYC zipcode shapefile

nyc_zip_sf &lt;- st_read(&quot;shapefiles/geo_export_8df5c38c-c74c-4840-9d00-da16c0201e07.shp&quot;, quiet = TRUE)

# Create the map_data

borough_data &lt;- borough_data %&gt;%
  rename(boro_name = borough)

map_data &lt;- nyc_zip_sf %&gt;%
  left_join(borough_data, by = &quot;boro_name&quot;)

# Create ED Visits Map 

ed_plot &lt;- ggplot() +
  geom_sf(data = filter(map_data, indicator == &quot;ed_visits_rate&quot;), 
          aes(fill = avg_rate)) +
  facet_wrap(~period) +
  scale_fill_viridis_c(
    option = &quot;plasma&quot;
  ) +
  theme_minimal() +
  labs(title = &quot;Pediatric Asthma ED Visit Rates by NYC Borough&quot;) +
  theme(
    plot.title = element_text(size = 12),
    legend.position = &quot;right&quot;,
    legend.key.height = unit(2, &quot;cm&quot;),
    axis.text = element_blank(),      
    axis.ticks = element_blank(),     
    panel.grid = element_blank()      
  )

# Display plot

ed_plot</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><strong>Figure 1. Borough Average ED Visit Rates per 10,000 Children
(aged 0-17 Years)</strong></p>
<p>Analysis of ED visit rates showed significant disparities dependent
on borough and time period. The Bronx, the northernmost borough of NYC,
consistently showed the highest rates across both periods, with 347.7
and 180.7 visits per 10,000 children respectively. All boroughs
experienced substantial decreases between 2016-2018 and 2019-2021, with
reductions ranging from 43% to 48%.</p>
<p>Despite this overall decline, the Bronx’s 2019-2021 rate remained
higher than any other borough’s 2016-2018 rates. Geographic
visualization highlighted persistent health disparities between
boroughs, with the Bronx showing consistently higher visit rates
compared to other areas of the city, including Manhattan to its south,
Queens to the east, and the more distant southern boroughs of Brooklyn
and Staten Island.</p>
<p>The most striking change between the two periods is the apparent
reduction in ED visits during 2019-2021, which could potentially be
related to the COVID-19 pandemic’s impact on healthcare utilization
patterns.</p>
</div>
<div id="hospitalizations" class="section level3">
<h3>Hospitalizations</h3>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">% Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">58.5</td>
<td align="right">36.8</td>
<td align="right">-37.1</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">35.5</td>
<td align="right">24.0</td>
<td align="right">-32.4</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">27.5</td>
<td align="right">16.5</td>
<td align="right">-40.0</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">21.5</td>
<td align="right">13.1</td>
<td align="right">-39.1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">20.6</td>
<td align="right">13.2</td>
<td align="right">-35.9</td>
</tr>
</tbody>
</table>
<p><strong>Table 2. Borough Average Asthma Hospitalizations per 10,000
Children (aged 0-17 Years)</strong></p>
<p>Hospitalization patterns largely reflected ED visit trends. The Bronx
again led with the highest rates at 58.5 and 36.8 per 10,000 children
across the two periods. All boroughs showed considerable decreases
between periods, ranging from 32% to 40%. Queens and Staten Island had
the lowest hospitalization rates throughout both time periods.</p>
<p>Notably, the ratio between ED visits and hospitalizations
(approximately 6:1) suggests that while many children visit the ED for
asthma, a smaller proportion require hospitalization.</p>
<pre class="r"><code># Create Hospitalizations Map 

hosp_plot &lt;- ggplot() +
  geom_sf(data = filter(map_data, indicator == &quot;hosp_rate&quot;), 
          aes(fill = avg_rate)) +
  facet_wrap(~period) +
  scale_fill_viridis_c(
    option = &quot;plasma&quot;
  ) +
  theme_minimal() +
  labs(title = &quot;Pediatric Asthma Hospitalization Rates by NYC Borough&quot;) +
  theme(
    plot.title = element_text(size = 12),
    panel.grid = element_blank(),         
    axis.text = element_blank(),           
    axis.ticks = element_blank(),         
    axis.title = element_blank()         
  )

# Display plot

hosp_plot</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p><strong>Figure 2. Borough Average Asthma Hospitalization Rates per
10,000 Children (aged 0-17 Years)</strong></p>
<p>Figures 1 and 2 reveal persistent borough-level disparities in both
ED visits and hospitalizations, with higher rates of healthcare
utilization in the Bronx reflecting an unequal distribution of child
asthma burden in New York City. These patterns suggest underlying
socioeconomic and environmental factors affecting child asthma rates
across different boroughs, with communities from lower-resourced parts
of New York City bearing a disproportionate share of the health
burden.</p>
</div>
</div>
<div id="environmental-determinants" class="section level2">
<h2>Environmental Determinants</h2>
<div id="air-quality-patterns-pm2.5" class="section level3">
<h3>Air Quality Patterns (PM2.5)</h3>
<pre class="r"><code># Load PM data

particulate_matter = 
  read_csv(&quot;data/Air_Quality_20231208.csv&quot;)

# Produce tidied PM dataset for analysis

tidy_analysis_pm = 
  particulate_matter |&gt;
  janitor::clean_names() |&gt;
    mutate(
    unique_id = as.character(unique_id),
    indicator_id = as.character(indicator_id),
    geo_join_id = as.character(geo_join_id)) |&gt;
  filter(name == &quot;Fine particles (PM 2.5)&quot;) |&gt;
  filter(time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;,
                            &quot;Annual Average 2018&quot;, &quot;Annual Average 2019&quot;,
                            &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;)) |&gt;
  filter(geo_type_name == &quot;Borough&quot;) |&gt;
  select(-unique_id, -indicator_id, -start_date) |&gt;
    rename(borough = geo_place_name) |&gt;
  mutate(
    period = case_when(
      time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;, &quot;Annual Average 2018&quot;) ~ &quot;2016-2018&quot;,
      time_period %in% c(&quot;Annual Average 2019&quot;, &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;) ~ &quot;2019-2021&quot;
    )
  ) |&gt;
  group_by(borough, period) |&gt;
  summarize(
    average_pm2.5 = mean(data_value, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  pivot_wider(
    names_from = period,
    values_from = average_pm2.5,
    names_prefix = &quot;avg_pm2.5_&quot;
  )</code></pre>
<pre class="r"><code># Plot of average PM2.5 levels by borough between 2016-2018 and 2019-2021

tidy_analysis_pm |&gt;
  pivot_longer(cols = -borough, names_to = &quot;Year_Group&quot;, values_to = &quot;PM2.5&quot;) |&gt; 
  mutate(borough = factor(borough, levels = unique(borough[order(PM2.5)]))) |&gt; 
  ggplot(aes(x = borough, y = PM2.5, fill = Year_Group)) +
  geom_bar(position = &quot;dodge&quot;, stat = &quot;identity&quot;) +
   labs(
    title = &quot;Average PM2.5 Levels by Borough (2016-2018 vs 2019-2021)&quot;,
    x = &quot;Borough&quot;,
    y = &quot;PM2.5 Values&quot;,
    fill = &quot;Year Group&quot;
  ) </code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p><strong>Figure 3. Average PM.25 levels across boroughs: 2016-2018 vs
2019-2021</strong></p>
<pre class="r"><code># Print PM2.5 Summary

tidy_analysis_pm_diff &lt;- 
  tidy_analysis_pm |&gt;
  mutate(
    `avg_pm2.5_2016-2018` = round(`avg_pm2.5_2016-2018`, 3),
    `avg_pm2.5_2019-2021` = round(`avg_pm2.5_2019-2021`, 3),
    pm2.5_difference = round(`avg_pm2.5_2016-2018` - `avg_pm2.5_2019-2021`, 3)
  )

knitr::kable(tidy_analysis_pm_diff, col.names = c(&quot;Borough&quot;, &quot;Average PM2.5 (2016-2018)&quot;, &quot;Average PM2.5 (2019-2021)&quot;, &quot;Difference in PM2.5 Levels&quot;))</code></pre>
<table>
<colgroup>
<col width="15%" />
<col width="27%" />
<col width="27%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">Average PM2.5 (2016-2018)</th>
<th align="right">Average PM2.5 (2019-2021)</th>
<th align="right">Difference in PM2.5 Levels</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">7.573</td>
<td align="right">6.553</td>
<td align="right">1.020</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">7.490</td>
<td align="right">6.470</td>
<td align="right">1.020</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">8.717</td>
<td align="right">7.627</td>
<td align="right">1.090</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">7.060</td>
<td align="right">6.337</td>
<td align="right">0.723</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">6.683</td>
<td align="right">5.870</td>
<td align="right">0.813</td>
</tr>
</tbody>
</table>
<p><strong>Table 3. Borough Average ED Visit Rates per 10,000 Children
(aged 0-17 Years)</strong></p>
<p>Fine particulate matter (PM2.5) concentrations show distinct spatial
patterns that partially align with asthma outcomes. Manhattan, despite
not having the highest asthma rates, consistently recorded the highest
PM2.5 concentrations (8.72 μg/m³ in 2016-2018, decreasing to 7.63 μg/m³
in 2019-2021). This interesting divergence from reported asthma ED visit
and hospitalization rates suggests that while air quality is a
significant factor, other environmental and social determinants
influence pediatric asthma outcomes in New York City.</p>
<pre class="r"><code># Load NYC geospatial data

geography = 
  read_excel(&quot;data/geoid_borough_name_nyc.xlsx&quot;) |&gt;
  rename(geo_join_id = ID) |&gt;
  mutate(geo_join_id = 
           as.character(geo_join_id))

# Tidy dataset for geospatial PM analysis

tidy_uhf42_pm = 
  particulate_matter |&gt;
  janitor::clean_names() |&gt;
    mutate(
    unique_id = as.character(unique_id),
    indicator_id = as.character(indicator_id),
    geo_join_id = as.character(geo_join_id)) |&gt;
  filter(name == &quot;Fine particles (PM 2.5)&quot;) |&gt;
  filter(time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;,
                            &quot;Annual Average 2018&quot;, &quot;Annual Average 2019&quot;,
                            &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;)) |&gt;
  filter(geo_type_name == &quot;UHF42&quot;) |&gt;
  select(-unique_id, -indicator_id, -start_date) |&gt;
  mutate(
    period = case_when(
      time_period %in% c(&quot;Annual Average 2016&quot;, &quot;Annual Average 2017&quot;, &quot;Annual Average 2018&quot;) ~ &quot;2016_2018&quot;,
      time_period %in% c(&quot;Annual Average 2019&quot;, &quot;Annual Average 2020&quot;, &quot;Annual Average 2021&quot;) ~ &quot;2019_2021&quot;
    )
  ) |&gt;
  group_by(geo_place_name, geo_join_id, period) |&gt;
  summarize(
    average_pm2.5 = mean(data_value, na.rm = TRUE),
    .groups = &quot;drop&quot;
  ) |&gt;
  pivot_wider(
    names_from = period,
    values_from = average_pm2.5,
    names_prefix = &quot;avg_pm2.5_&quot;
  ) 

# Load shapefiles map for UHF data

uhf42_map &lt;- st_read(&quot;data/UHF_42_DOHMH_2009.shp&quot;, quiet = TRUE) 

tidy_uhf42_pm &lt;- 
  tidy_uhf42_pm |&gt;
  rename(UHFCODE = geo_join_id) |&gt;
  mutate(
    UHFCODE = as.double(UHFCODE))

# Combine geospatial data and PM data

map_uhf42 &lt;- 
  uhf42_map |&gt;
  left_join(tidy_uhf42_pm, by = &quot;UHFCODE&quot;) |&gt;
  pivot_longer(cols = starts_with(&quot;avg_pm2.5_&quot;), 
               names_to = &quot;time_period&quot;, 
               values_to = &quot;avg_pm2.5&quot;)

# Produce heat map 

heat_map_pm2.5 &lt;- ggplot() +
  geom_sf(data = map_uhf42, aes(fill = avg_pm2.5)) +
  facet_wrap(~time_period, ncol = 2) +
  scale_fill_viridis_c(option = &quot;plasma&quot;, na.value = &quot;grey50&quot;) +
  labs(
    title = &quot;PM2.5 (ug/m3) Levels by UHF42 Neighborhood&quot;,
    fill = &quot;PM2.5&quot;
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 12),
    legend.position = &quot;right&quot;,
    legend.key.height = unit(2, &quot;cm&quot;),
    panel.grid = element_blank(),          
    axis.text = element_blank(),           
    axis.ticks = element_blank(),         
    axis.title = element_blank()          
  )

# Show heat map for PM2.5 

heat_map_pm2.5</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p><strong>Figure 4. PM2.5 levels by United Hospital Fund (UHF)
Neighborhoods</strong></p>
<p>The uniform reduction in PM2.5 levels across boroughs between the two
periods (particularly the identical 1.02 μg/m³ reduction in both the
Bronx and Brooklyn) suggests city-wide factors, possibly including urban
policy interventions or COVID-19-related activity reductions, affected
air quality improvements. Based on UHF42 neighborhood-level analysis,
Midtown Manhattan has consistently high PM2.5 levels across both time
periods. The PM2.5 hotspots in Midtown Manhattan suggest urban factors,
such as traffic patterns, industrial activities and building density,
likely play a key role in determining local air quality.</p>
</div>
<div id="greenspace" class="section level3">
<h3>Greenspace</h3>
<pre class="r"><code># Load greenspace data

greenspace_clean = read_csv(&quot;./data/Parks_Properties_20241126.csv&quot;, na = c(&quot;NA&quot;, &quot;.&quot;, &quot;&quot;)) |&gt;
  janitor::clean_names() |&gt; 
  mutate(
    borough = case_match(borough, #renamed borough according to data dictionary
      &quot;R&quot; ~ &quot;Staten Island&quot;,
      &quot;Q&quot; ~ &quot;Queens&quot;,
      &quot;X&quot; ~ &quot;Bronx&quot;,
      &quot;B&quot; ~ &quot;Brooklyn&quot;,
      &quot;M&quot; ~ &quot;Manhattan&quot;),
    typecategory = as.factor(typecategory), #converted char variables into factors
    borough = as.factor(borough)) |&gt;
  separate(acquisitiondate, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) |&gt;
  select(year, borough, acres, typecategory) |&gt; 
  filter(year &lt; 2022 | is.na(year))</code></pre>
<pre class="r"><code># Load 2016-2018 dataset

dataset1_gs = greenspace_clean |&gt;
  filter(year &lt; 2019 | is.na(year)) |&gt; 
  group_by(year, borough) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

dataset1_gs_calc = dataset1_gs |&gt; 
  group_by(borough) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;2016-2018&quot;)

# Load 2019-2021 dataset

dataset2_gs = greenspace_clean |&gt;
  filter(year &lt; 2022 | is.na(year)) |&gt;
  group_by(year, borough) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

dataset2_gs_calc = dataset2_gs |&gt; 
  group_by(borough) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;2019-2021&quot;)

# Combine datasets

total_acres = bind_rows(dataset1_gs_calc, dataset2_gs_calc)
  
# Total acres dataset

Greenspace_data = total_acres |&gt;
  pivot_wider(names_from = year_group,
              values_from = acres_sum)

# Produce plot of greenspace distribution across NYC boroughs

ggplot(total_acres, aes(x = reorder(borough, acres_sum), y = acres_sum, fill = year_group)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;, alpha = 0.7) + 
  labs(x = &quot;Borough&quot;, y = &quot;Greenspace (Total Acres)&quot;, title = &quot;Greenspaces Across Borough by Year Group&quot;) +
  theme_minimal()</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p><strong>Figure 5. Greenspace distribution across boroughs: 2016-2018
vs 2019-2021</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">2812.520</td>
<td align="right">3071.240</td>
<td align="right">258.720</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">1130.236</td>
<td align="right">1249.861</td>
<td align="right">119.625</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">2171.277</td>
<td align="right">2182.771</td>
<td align="right">11.494</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">1794.986</td>
<td align="right">1795.942</td>
<td align="right">0.956</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">1715.288</td>
<td align="right">1715.633</td>
<td align="right">0.345</td>
</tr>
</tbody>
</table>
<p><strong>Table 4. Difference in Greenspace distribution across
boroughs</strong></p>
<p>Our analysis highlights substantial inequities in greenspace access
across New York City. Staten Island’s dominance in both total coverage
(approximately 3,000 acres) and increased greenspace (258.72 acres)
stands in contrast to the Bronx, which showed the lowest coverage
despite a modest increase of 119.625 acres. This apparent inverse
relationship between greenspace availability and asthma rates - with the
Bronx having the highest asthma ED visit and hospitalization rates and
lowest greenspace coverage - suggests a potential environmental health
relationship warranting further investigation.</p>
<pre class="r"><code># Calculate mean acres for each type category across all years

types_nyc = greenspace_clean |&gt;
  select(-borough) |&gt;
  group_by(typecategory) |&gt;
  summarise(acres_tp = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

# Process data for 2016-2018 period

type1A = greenspace_clean |&gt;
  filter(year &lt; 2019 | is.na(year)) |&gt; 
  group_by(year, borough, typecategory) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

# Calculate total acres by borough and type for 2016-2018

type1B = type1A |&gt; 
  group_by(borough, typecategory) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;year1&quot;) #2016-2018

# Process data for 2019-2021 period

type2A = greenspace_clean |&gt;
  filter(year &lt; 2022 | is.na(year)) |&gt;
  group_by(year, borough, typecategory) |&gt;
  summarise(avg_acres_per_yr_bor = mean(acres, na.rm = TRUE), .groups = &quot;drop&quot;)

# Calculate total acres by borough and type for 2019-2021

type2B = type2A |&gt; 
  group_by(borough, typecategory) |&gt; 
  summarise(acres_sum = sum(avg_acres_per_yr_bor, na.rm = TRUE), .groups = &quot;drop&quot;) |&gt; 
  mutate(year_group = &quot;year2&quot;) #2019-2021

# Combine both time periods and calculate total acres by type

binded = bind_rows(type1B, type2B) |&gt;
  group_by(typecategory, year_group) |&gt;
  summarise(acres_total = sum(acres_sum, na.rm = TRUE))

# Create bar plot comparing greenspace types between periods

binded |&gt; 
   mutate(year_group = case_match(year_group,
      &quot;year1&quot; ~ &quot;2016-2018&quot;,
      &quot;year2&quot; ~ &quot;2019-2021&quot;)) |&gt;
  ggplot(aes(x = reorder(typecategory, acres_total), y = acres_total, fill = year_group)) + 
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;, width = 0.6) +
  labs(x = &quot;Greenspace Types&quot;, y = &quot;Total Acres&quot;, title = &quot;Total Acres of NYC Greenspace by Type and Year Group&quot;) +
    theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust = 1))</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p><strong>Figure 6. Greenspace types across boroughs: 2016-2018 vs
2019-2021</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">Greenspace Type</th>
<th align="right">2016-2018</th>
<th align="right">2019-2021</th>
<th align="right">Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Neighborhood Park</td>
<td align="right">910.009</td>
<td align="right">1169.625</td>
<td align="right">259.616</td>
</tr>
<tr class="even">
<td align="left">Managed Sites</td>
<td align="right">483.304</td>
<td align="right">602.398</td>
<td align="right">119.094</td>
</tr>
<tr class="odd">
<td align="left">Nature Area</td>
<td align="right">3084.626</td>
<td align="right">3117.486</td>
<td align="right">32.860</td>
</tr>
<tr class="even">
<td align="left">Undeveloped</td>
<td align="right">190.171</td>
<td align="right">191.357</td>
<td align="right">1.186</td>
</tr>
<tr class="odd">
<td align="left">Waterfront Facility</td>
<td align="right">2277.161</td>
<td align="right">2277.691</td>
<td align="right">0.530</td>
</tr>
<tr class="even">
<td align="left">Garden</td>
<td align="right">17.201</td>
<td align="right">17.600</td>
<td align="right">0.399</td>
</tr>
<tr class="odd">
<td align="left">Playground</td>
<td align="right">137.855</td>
<td align="right">138.154</td>
<td align="right">0.299</td>
</tr>
</tbody>
</table>
<p><strong>Table 5. Difference in greenspace coverage across boroughs:
2016-2018 vs 2019-2021</strong></p>
<p>The analysis of greenspace types suggests varying priorities in green
developments across New York City. The substantial expansion of
neighborhood parks (259.617 acres) and managed sites (119.095 acres)
indicates focused efforts to increase accessible green spaces. However,
the minimal changes in smaller categories like gardens and plazas
suggests that large-scale greenspace development may not adequately
address neighborhood-level access needs, which could be more meaningful
for boroughs like the Bronx.</p>
<table>
<colgroup>
<col width="14%" />
<col width="26%" />
<col width="31%" />
<col width="28%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="left">Highest</th>
<th align="left">Second Highest</th>
<th align="left">Third Highest</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="left">Flagship Park (1532.62)</td>
<td align="left">Parkway (585.51)</td>
<td align="left">Nature Area (312.15)</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="left">Community Park (1487.77)</td>
<td align="left">Parkway (827.95)</td>
<td align="left">Flagship Park (571.31)</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="left">Flagship Park (1631.46)</td>
<td align="left">Waterfront Facility (1093.79)</td>
<td align="left">Community Park (973.11)</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="left">Community Park (1098.39)</td>
<td align="left">Flagship Park (1094.31)</td>
<td align="left">Neighborhood Park (207.73)</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="left">Nature Area (1690.97)</td>
<td align="left">Community Park (1371.96)</td>
<td align="left">Flagship Park (760.79)</td>
</tr>
</tbody>
</table>
<p><strong>Table 6. Top 3 Greenspace Types (Total Acres) Across
Boroughs</strong></p>
<p>While the Bronx contains major Flagship Parks and Parkways among its
largest green spaces, these types of spaces may not provide the same
respiratory health benefits as smaller, more accessible neighborhood
parks distributed throughout residential areas where children live and
play. Despite the expansion of neighborhood parks (259.617 acres) and
managed sites (119.095 acres) across the city, the concentration of
greenspace in large, potentially less accessible formats like Flagship
Parks may limit their protective effects against childhood asthma.
Staten Island’s lower asthma rates and large Nature Area (1690.97 acres)
present an interesting contrast, though this association may reflect
broader factors such as lower population density or better air quality
rather than the specific type of greenspace.</p>
</div>
<div id="temperature" class="section level3">
<h3>Temperature</h3>
<pre class="r"><code># Load and clean raw temperature data for each borough

manhattan = read_csv(&quot;data/manhattan.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Manhattan&quot;) |&gt; 
  janitor::clean_names()

bronx = read_csv(&quot;data/bronx.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Bronx&quot;) |&gt; 
  janitor::clean_names()

brooklyn = read_csv(&quot;data/brooklyn.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Brooklyn&quot;) |&gt; 
  janitor::clean_names()

queens = read_csv(&quot;data/queens.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Queens&quot;) |&gt; 
  janitor::clean_names()

staten_island = read_csv(&quot;data/staten_island.csv&quot;,skip = 3) |&gt;
  mutate(Borough = &quot;Staten Island&quot;) |&gt; 
  janitor::clean_names()

# Combine temperature data from all boroughs and format dates/times

all_temp = bind_rows(manhattan, bronx, brooklyn, queens, staten_island) |&gt; 
  mutate(borough = as.factor(borough)) |&gt; 
  mutate(date = as.Date(time, format = &quot;%d/%m/%Y&quot;)) |&gt; 
  select(time:temperature_2m_mean, borough, date) |&gt; 
  mutate(years = year(date)) |&gt; 
  mutate(months = as.Date(paste0(format(date, &quot;%Y-%m&quot;), &quot;-01&quot;), format = &quot;%Y-%m-%d&quot;))

# Calculate average temperatures by borough and year group

all_temp_borough = all_temp |&gt; 
  mutate(date = as.Date(time, format = &quot;%d/%m/%Y&quot;)) |&gt; 
  mutate(data_years = ifelse(year(date) %in% 2016:2018, &quot;2016-2018&quot;, &quot;2019-2021&quot;)) |&gt; 
  select(temperature_2m_max:data_years) |&gt; 
  group_by(data_years, borough) |&gt; 
  summarise(avg_temperature = mean(temperature_2m_mean, na.rm = TRUE))</code></pre>
<pre class="r"><code># Produce plot of monthly Mean temperature

all_temp_month = all_temp |&gt; 
  group_by(months, borough) |&gt; 
  summarise(avg_month = mean(temperature_2m_mean, na.rm = TRUE))

ggplot(all_temp_month, aes(x = months, y = avg_month, color = borough)) +
  geom_line() +
  geom_point() +
  labs(
    title = &quot;Monthly Mean Temperature (2016-2021) by Borough&quot;,
    x = &quot;Month&quot;,
    y = &quot;Average Temperature (Celsius)&quot;,
    color = &quot;Borough&quot;
  ) +
  theme_minimal()</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p><strong>Figure 7. Monthly Mean Temperature across NYC Boroughs
(2016-2021)</strong></p>
<p>Temperature analysis shows differences across New York City’s
boroughs between 2016 and 2021. While seasonal variations show
consistent patterns across boroughs (peaks around 25°C and lows near
0°C), the slight but persistent temperature differences between boroughs
suggest varying urban heat island effects.</p>
<pre class="r"><code># Mean temperature data

mean_temp_year = all_temp |&gt; 
  group_by(years, borough) |&gt; 
  summarize(
    high_temp = mean(temperature_2m_max, na.rm = TRUE),
    low_temp = mean(temperature_2m_min, na.rm = TRUE),
    mean_temp = mean(temperature_2m_mean, na.rm = TRUE)
  ) |&gt; 
  arrange(years, borough) 

# Produce average temperature table with rounded values

mean_temp_year |&gt; 
  select(years, borough, mean_temp) |&gt; 
  mutate(mean_temp = round(mean_temp, 3)) |&gt;
  pivot_wider(
    names_from = borough,
    values_from = mean_temp
  ) |&gt;
  knitr::kable(col.names = c(&quot;Years&quot;, &quot;Bronx&quot;, &quot;Brooklyn&quot;, &quot;Manhattan&quot;, &quot;Queens&quot;, &quot;Staten Island&quot;))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">Years</th>
<th align="right">Bronx</th>
<th align="right">Brooklyn</th>
<th align="right">Manhattan</th>
<th align="right">Queens</th>
<th align="right">Staten Island</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2016</td>
<td align="right">12.499</td>
<td align="right">12.759</td>
<td align="right">12.393</td>
<td align="right">12.662</td>
<td align="right">12.707</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">12.231</td>
<td align="right">12.402</td>
<td align="right">12.153</td>
<td align="right">12.144</td>
<td align="right">12.393</td>
</tr>
<tr class="odd">
<td align="right">2018</td>
<td align="right">12.085</td>
<td align="right">12.118</td>
<td align="right">11.933</td>
<td align="right">11.950</td>
<td align="right">12.142</td>
</tr>
<tr class="even">
<td align="right">2019</td>
<td align="right">11.981</td>
<td align="right">12.124</td>
<td align="right">11.851</td>
<td align="right">11.860</td>
<td align="right">12.098</td>
</tr>
<tr class="odd">
<td align="right">2020</td>
<td align="right">12.866</td>
<td align="right">12.955</td>
<td align="right">12.683</td>
<td align="right">12.725</td>
<td align="right">12.855</td>
</tr>
<tr class="even">
<td align="right">2021</td>
<td align="right">12.651</td>
<td align="right">12.766</td>
<td align="right">12.566</td>
<td align="right">12.548</td>
<td align="right">12.755</td>
</tr>
</tbody>
</table>
<p><strong>Table 7. Mean Temperature across NYC Boroughs
(2016-2021)</strong></p>
<p>Brooklyn and Staten Island’s slightly consistently higher average
temperatures, compared to Manhattan’s lower averages, may reflect
differences in building density and greenspace coverage.</p>
<p>The observed warming trend between periods (0.2-0.3°C increase)
aligns with broader climate change patterns but may also reflect the
effects of localized urban developments. This warming pattern, combined
with limited greenspace in asthma hotspot areas like the Bronx, suggests
potential intersecting environmental health challenges.</p>
<div id="heat-vulnerability-index" class="section level4">
<h4>Heat Vulnerability Index</h4>
<p>While our exploratory analysis examined temperature patterns across
NYC boroughs, our final modeling approach ultimately employed the Heat
Vulnerability Index (HVI) rather than raw temperature measurements. This
decision was driven by several key considerations. First, our
exploratory analysis revealed that temperature patterns were very
similar across all boroughs, with only slight variations in average
temperatures (0.2-0.3°C differences). This uniformity in temperature
measurements meant it would not be easy to explain the substantial
geographic variations we observed in asthma outcomes. Second, HVI would
be able to represent neighborhood-level variations in heat vulnerability
that raw temperature data alone would unlikely show based on the data
obtained.</p>
<p>Instead, we opted to use the Heat Vulnerability Index, which provides
a more comprehensive measure of the impact of heat stress on different
communities. The HVI incorporates not only environmental factors but
also crucial socio-demographic characteristics that influence a
community’s resilience to heat stress. These include language
vulnerability (relevant for NYC’s diverse neighborhoods), socioeconomic
vulnerability, environmental and urban vulnerability, and elderly
isolation - factors that may indirectly affect childhood asthma outcomes
through the social determinants of health, including housing quality,
access to cooling infrastructure, and overall community resources.</p>
<pre class="r"><code># Read full data

full_data2 = read_csv(&quot;data/NYC_total.csv&quot;)

# Calculate average HVI scores for each borough
# This helps understand overall heat vulnerability patterns across boroughs

daa = full_data2 |&gt; 
  mutate(hvi = as.numeric(hvi)) |&gt;
  group_by(borough) |&gt; 
  summarise(hvi_mean = mean(hvi))

# Produce table

knitr::kable(daa, col.names = c(&quot;Borough&quot;, &quot;Mean HVI&quot;))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">Mean HVI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">4.070707</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">3.653061</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">2.418605</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">3.274419</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">2.068182</td>
</tr>
</tbody>
</table>
<p><strong>Table 8. Mean HVI across NYC Boroughs</strong></p>
<p>The mean Heat Vulnerability Index varies considerably across NYC
boroughs, with the Bronx showing the highest average (4.07), followed by
Brooklyn (3.65), Queens (3.27), Manhattan (2.42), and Staten Island
(2.07). This suggests that heat vulnerability is not evenly distributed
across the city, with some boroughs experiencing systematically higher
heat vulnerability than others. The notable variation in HVI means
across boroughs indicates that geographic and demographic factors play
an important role in heat vulnerability distribution in NYC.</p>
<pre class="r"><code># Plot for mean HVI scores by borough

borough_plot = ggplot(daa, aes(x = reorder(borough, -hvi_mean), y = hvi_mean)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;steelblue&quot;, alpha = 0.8) +
  geom_text(aes(label = round(hvi_mean, 2)), 
            vjust = -0.5, 
            size = 3.5) +
  labs(title = &quot;Mean Heat Vulnerability Index (HVI) by Borough&quot;,
       x = &quot;Borough&quot;,
       y = &quot;Mean HVI Score&quot;) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 0, hjust = 0.5)) +
  ylim(0, max(daa$hvi_mean) * 1.1)  # Add some space above bars for labels

# Display the plot

borough_plot</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-20-1.png" width="672" />
<strong>Figure 8. Mean Heat Vulnerability Index (HVI) by
Borough</strong></p>
<p>The above plot provides a visual representation of these HVI
disparities, with a noticeable difference between the Bronx and Staten
Island - a gap of 2 points on the HVI scale.</p>
</div>
</div>
</div>
</div>
<div id="predictor-and-outcome-associations" class="section level1">
<h1>Predictor and Outcome Associations</h1>
<div id="pm2.5" class="section level2">
<h2>PM2.5</h2>
<div id="year-group-comparison" class="section level4">
<h4>Year Group Comparison</h4>
<pre class="r"><code>#plot both outcomes
combined_plot = EDplot_pm2_5 + hosplot_pm2_5 

combined_plot</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p><strong>Figure 9. PM2.5 Levels and Outcome (ED Visits Rate and
Hospitalization Rate) by Year Group</strong></p>
<pre class="r"><code>#combine correlation table
ED_values = EDmodels_pm2_5 |&gt;
  mutate(Outcome = &quot;ED Visit Rates&quot;)

Hosp_values = hospmodels_pm2_5 |&gt;
  mutate(Outcome = &quot;Hospitalization Rates&quot;)

Yr_table = bind_rows(ED_values, Hosp_values) |&gt;
  select(Outcome, Year, slope, r_squared, r) #reorder

knitr::kable(Yr_table, digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Outcome</th>
<th align="left">Year</th>
<th align="right">slope</th>
<th align="right">r_squared</th>
<th align="right">r</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ED Visit Rates</td>
<td align="left">2016-2018</td>
<td align="right">48.927</td>
<td align="right">0.142</td>
<td align="right">0.377</td>
</tr>
<tr class="even">
<td align="left">ED Visit Rates</td>
<td align="left">2019-2021</td>
<td align="right">25.223</td>
<td align="right">0.104</td>
<td align="right">0.323</td>
</tr>
<tr class="odd">
<td align="left">Hospitalization Rates</td>
<td align="left">2016-2018</td>
<td align="right">8.446</td>
<td align="right">0.172</td>
<td align="right">0.414</td>
</tr>
<tr class="even">
<td align="left">Hospitalization Rates</td>
<td align="left">2019-2021</td>
<td align="right">6.412</td>
<td align="right">0.171</td>
<td align="right">0.414</td>
</tr>
</tbody>
</table>
<p><strong>Table 9. Correlation between PM2.5 Levels and Outcomes by
Year Group</strong></p>
<p><strong>ED Visit Rates</strong>: The association between PM2.5 and ED
visit rates are similar for both year groups. Data from 2016 to 2018 and
2019 to 2021 indicate a positive association between the two variables
with a correlation coefficient of 0.377 and 0.323, respectively. Thus,
PM2.5 levels is weakly associated with hospitalization rate for both
year groups.</p>
<p><strong>Hospitalization Rates</strong>: There is a positive
association between PM2.5 and hospitalization rates for both year groups
with an estimated correlation coefficient of 0.414. Decreased PM2.5
levels is thus moderately associated with decreased hospitalization rate
for both year groups.</p>
</div>
<div id="borough-and-year-comparison" class="section level4">
<h4>Borough and Year Comparison</h4>
<pre class="r"><code>combo = GS_ED_pm2_5 + GS_HR_pm2_5
combo</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p><strong>Figure 10. PM2.5 Levels and Outcomes across Borough and by
Year Group</strong></p>
<p>For all boroughs, PM2.5 levels and ED visit rates are higher in 2016
to 2018 than in 2019 to 2021. Compared to the other boroughs, decrease
in ED visit rate per PM2.5 level is most dramatic in the Bronx.</p>
<p>Similar to the trend seen between PM2.5 levels and ED visit rates,
PM2.5 levels and hospitalization rates are higher in 2016 to 2018 than
in 2019 to 2021. Bronx also experienced the most dramatic decrease in
hospitalization rate per PM2.5 level.</p>
</div>
</div>
<div id="greenspace-1" class="section level2">
<h2>Greenspace</h2>
<div id="year-group-comparison-1" class="section level4">
<h4>Year Group Comparison</h4>
<pre class="r"><code>#GS plots
GS_combo = EDplot + hosplot

GS_combo</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-24-1.png" width="672" />
<strong>Figure 11. Greenspace and Outcome (ED Visits Rate and
Hospitalization Rate) by Year Group</strong></p>
<pre class="r"><code>#combine correlation table
GS_ED_values = EDmodels |&gt;
  mutate(Outcome = &quot;ED Visit Rates&quot;)

GS_Hosp_values = hospmodels |&gt;
  mutate(Outcome = &quot;Hospitalization Rates&quot;)

Yr_table_GS = bind_rows(GS_ED_values, GS_Hosp_values) |&gt;
  select(Outcome, Year, slope, r_squared, r) #reorder

knitr::kable(Yr_table_GS, digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Outcome</th>
<th align="left">Year</th>
<th align="right">slope</th>
<th align="right">r_squared</th>
<th align="right">r</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ED Visit Rates</td>
<td align="left">2016-2018</td>
<td align="right">-0.145</td>
<td align="right">0.819</td>
<td align="right">-0.905</td>
</tr>
<tr class="even">
<td align="left">ED Visit Rates</td>
<td align="left">2019-2021</td>
<td align="right">-0.061</td>
<td align="right">0.690</td>
<td align="right">-0.830</td>
</tr>
<tr class="odd">
<td align="left">Hospitalization Rates</td>
<td align="left">2016-2018</td>
<td align="right">-0.022</td>
<td align="right">0.742</td>
<td align="right">-0.861</td>
</tr>
<tr class="even">
<td align="left">Hospitalization Rates</td>
<td align="left">2019-2021</td>
<td align="right">-0.012</td>
<td align="right">0.628</td>
<td align="right">-0.793</td>
</tr>
</tbody>
</table>
<p><strong>Table 10. Correlation between Greenspace and Outcomes by Year
Group</strong></p>
<p><strong>ED Visit Rates</strong>: The correlation coefficient for both
year groups are similar. Data from 2016 to 2018 indicates a negative
association between greenspace and ED visit rate (r = -0.905). Data from
2019 to 2021 also shows a negative association between these two
variables (r = -0.830). Thus, increased greenspace is strongly
associated with decreased ED visit rate for both year groups.</p>
<p><strong>Hospitalization Rates</strong>: Similar to the trend
comparing greenspace and ED visit rates, the correlation coefficient for
both year groups are similar. Data from 2016 to 2018 indicates a
negative association between greenspace and hospitalization rate (r =
-0.861). Data from 2019 to 2021 also shows a negative association
between these two variables (r = -0.793). Thus, **increased greenspace
is strongly associated with decreased hospitalization rate for both year
groups.</p>
</div>
<div id="borough-and-year-comparison-1" class="section level4">
<h4>Borough and Year Comparison</h4>
<pre class="r"><code>combo1 = GS_ED + GS_HR

combo1</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p><strong>Figure 12. Greenspace and Outcome across Borough and by Year
Group</strong></p>
<p>In Bronx, there is a dramatic decrease in ED visit rate with an
increase in total acres of greenspace between the two year groups. This
decrease is also seen for Staten Island. The association is less obvious
for Brooklyn, Manhattan, and Queens.</p>
<p>When comparing between the two year groups, the association for
borough-level greenspace and ED visit rate is similar to trend for
borough-level greenspace and hospitalization rate.</p>
</div>
</div>
<div id="temperature-1" class="section level2">
<h2>Temperature</h2>
<div id="year-group-comparison-2" class="section level4">
<h4>Year Group Comparison</h4>
<pre class="r"><code>temp_plot = tempplot + tempplot2

temp_plot</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p><strong>Figure 13. Temperature and Outcome (ED Visits Rate and
Hospitalization Rate) by Year Group</strong></p>
<pre class="r"><code>#combine correlation table
temp_ED_values = tempmodel |&gt;
  mutate(Outcome = &quot;ED Visit Rates&quot;)

temp_Hosp_values = tempmodel2 |&gt;
  mutate(Outcome = &quot;Hospitalization Rates&quot;)

temp_Yr_table = bind_rows(temp_ED_values, temp_Hosp_values) |&gt;
  select(Outcome, Year, slope, r_squared, r) #reorder

knitr::kable(temp_Yr_table, digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Outcome</th>
<th align="left">Year</th>
<th align="right">slope</th>
<th align="right">r_squared</th>
<th align="right">r</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ED Visit Rates</td>
<td align="left">2016-2018</td>
<td align="right">-282.676</td>
<td align="right">0.105</td>
<td align="right">-0.323</td>
</tr>
<tr class="even">
<td align="left">ED Visit Rates</td>
<td align="left">2019-2021</td>
<td align="right">-17.658</td>
<td align="right">0.002</td>
<td align="right">-0.039</td>
</tr>
<tr class="odd">
<td align="left">Hospitalization Rates</td>
<td align="left">2016-2018</td>
<td align="right">-47.811</td>
<td align="right">0.121</td>
<td align="right">-0.348</td>
</tr>
<tr class="even">
<td align="left">Hospitalization Rates</td>
<td align="left">2019-2021</td>
<td align="right">-10.757</td>
<td align="right">0.014</td>
<td align="right">-0.120</td>
</tr>
</tbody>
</table>
<p><strong>Table 11. Correlation between Temperature and Outcomes by
Year Group</strong></p>
<p><strong>ED Visit Rate</strong>: The correlation coefficient for the
year groups are different. Data from 2016 to 2018 indicates a weak
negative association between temperature and ED visit rate (r = -0.323).
The correlation coefficient for 2019 to 2021 (r = -0.039) indicates no
association between these two variables.</p>
<p>We can infer that temperature is not a significant factor for ED
visits.</p>
<p><strong>Hospitalization Rate</strong>: Data from 2016 to 2018
indicates a weak negative association between temperature and
hospitalization rate (r = -0.348). The correlation coefficient for 2019
to 2021 (r = -0.120) indicates a very week negative association between
these two variables.</p>
<p>We can infer that temperature is not a significant factor for
Hospitalization.</p>
</div>
<div id="borough-and-year-comparison-2" class="section level4">
<h4>Borough and Year Comparison</h4>
<p><img src="report_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p><strong>Figure 14. Temperature and Outcomes across Borough and by
Year Group</strong></p>
<p>The plot shows that the higher temperature is associated with lower
rate of ED visit and hospitalization.</p>
</div>
</div>
<div id="heat-vulnerability-index-hvi" class="section level2">
<h2>Heat Vulnerability Index (HVI)</h2>
<p><img src="report_files/figure-html/unnamed-chunk-35-1.png" width="1152" /></p>
<p><strong>Figure 15. Associations between HVI and Outcomes</strong></p>
<p>The scatter plots show consistent positive relationships between Heat
Vulnerability Index and both pediatric asthma health outcomes across
time periods. ED visit rates show a stronger association with HVI than
hospitalization rates, as observed in steeper trend lines. The
relationship appears more pronounced in the 2016-2018 period, with ED
visits ranging from 0 to approximately 700 per 10,000 across HVI scores,
compared to 0-350 in 2019-2021.</p>
<p>While the overall patterns persist in 2019-2021, the rates are lower,
particularly for ED visits. The considerable vertical spread in the data
points at each HVI level suggests that other factors beyond heat
vulnerability influence pediatric asthma health outcomes.</p>
</div>
</div>
<div id="regression-analysis" class="section level1">
<h1>Regression Analysis</h1>
<p>In our original project outline we considered modeling temperature,
greenspace, and PM2.5 levels all in one linear regression model. After
cleaning the data and conducting some exploratory analysis, we
discovered that the average temperature across boroughs was not very
different, thus indicating it may not be an ideal variable to predict
asthma hospitalizations from. By searching the existing literature on
this topic, we identified HVI as a better and more widely used indicator
of risk for asthma emergencies. HVI better captures risk of poor health
due to environmental factors, so we were interested to see if HVI alone
is associated with asthma emergency visits and hospitalizations.</p>
<p>Furthermore, we fit regression models for the time periods 2016-2018
and 2019-2021. We hypothesized that due to the improved environmental
conditions as a result of the COVID-19 pandemic, environmental risk
factors for pediatric asthma emergencies would decrease, thus resulting
in lower pediatric asthma emergencies rates during time period
2019-2021.</p>
<p>Using linear regression models, we observed the linear association
between HVI and pediatric emergency department visit rates (per 10,000
children), by borough. Our models assign the reference group as the
borough with the highest ED visit rate.</p>
<div id="emergency-department-visits" class="section level3">
<h3>Emergency Department Visits</h3>
<div id="period" class="section level4">
<h4>2016-2018 period</h4>
<pre class="r"><code># Fit linear regression model for ED visits (2016-2018)
# Examining relationship between visit rates and borough/HVI

fit = lm(zip_code_rate ~ borough + hvi, data = full_data2_ed_3)

# Format results table

results_table = tidy(fit) |&gt;
  select(-statistic) |&gt;
  knitr::kable(digit = 3)

# Display table

results_table</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">68.358</td>
<td align="right">28.085</td>
<td align="right">0.016</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">-158.440</td>
<td align="right">22.653</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">-37.827</td>
<td align="right">24.314</td>
<td align="right">0.122</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-169.356</td>
<td align="right">21.400</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">-113.008</td>
<td align="right">32.551</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">hvi</td>
<td align="right">69.150</td>
<td align="right">5.452</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p><strong>Table 12. Statistical Results for ED Visits
(2016-2018)</strong></p>
<p>For the 2016-2018 time period, compared to the Bronx, Queens shows
the largest reduction in ED visits (-169.36 visits, p &lt; 0.001),
followed by Brooklyn (-158.44 visits, p &lt; 0.001) and Staten Island
(-113.01 visits, p = 0.001). Manhattan’s lower rate (-37.83 visits) was
not statistically significant (p = 0.122). Heat vulnerability shows a
strong positive association with ED visits: for each one-unit increase
in HVI score, ED visit rates increase by approximately 69.15 visits per
10,000 children (p &lt; 0.001).</p>
<p>This model indicates that both geographic location and heat
vulnerability are significant predictors of pediatric asthma ED visits,
with the Bronx experiencing substantially higher rates than most other
boroughs.</p>
<p>Earlier in our report we found that the Bronx has some of the highest
PM2.5 levels and lowest greenspace acres. HVI factors in greenspace
acres so it makes sense that places with less greenspace also have low
HVI indexes. While PM2.5 levels are not factored into HVI index, we know
that there are associations between greenspace and PM2.5 levels
therefore it makes sense that places with high PM2.5 levels would have
less greenspace, higher HVI indexes, and therefore more asthma
emergencies.</p>
</div>
<div id="period-1" class="section level4">
<h4>2019-2021 period</h4>
<pre class="r"><code># Fit linear regression model for ED visits (2019-2021)
# Examining relationship between visit rates and borough/HVI

fit2 = lm(zip_code_rate ~ borough + hvi, data = full_data2_ed_4)

# Format results table

results_table2 = tidy(fit2) |&gt;
  select(-statistic) |&gt;
  knitr::kable(digit = 3)

# Display table

results_table2</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">38.544</td>
<td align="right">14.538</td>
<td align="right">0.009</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">-81.901</td>
<td align="right">11.612</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">-18.588</td>
<td align="right">12.526</td>
<td align="right">0.140</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-88.609</td>
<td align="right">10.981</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">-55.996</td>
<td align="right">16.715</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">hvi</td>
<td align="right">35.180</td>
<td align="right">2.840</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p><strong>Table 13. Statistical Results for ED Visits
(2019-2021)</strong></p>
<p>For the 2019-2021 time period, Queens shows the largest reduction in
ED visits compared to the Bronx (-88.61 visits, p &lt; 0.001), closely
followed by Brooklyn (-81.90 visits, p &lt; 0.001). Staten Island shows
fewer visits (-55.99, p = 0.001), while Manhattan’s lower rate (-18.59
visits) remains not statistically significant (p = 0.140).</p>
<p>The HVI effect remains significant but notably smaller than the
previous period: each one-unit increase in HVI score is associated with
an increase of 35.18 visits per 10,000 children (p &lt; 0.001), roughly
half the effect seen in 2016-2018. This aligns with our hypothesis that
improved environmental conditions during the COVID-19 pandemic likely
decreased risk of asthma emergencies. Despite overall improvement in HVI
and decreased asthma emergencies across NYC across these time periods,
disparities remain by borough.</p>
</div>
</div>
<div id="hospitalizations-1" class="section level3">
<h3>Hospitalizations</h3>
<div id="period-2" class="section level4">
<h4>2016-2018 period</h4>
<pre class="r"><code># Fit linear regression model for hospitalizations (2016-2018)

fit3 = lm(zip_code_rate ~ borough + hvi, data = full_data2_hosp_3)

# Format results table

results_table3 = tidy(fit3) |&gt;
  select(-statistic) |&gt;
  knitr::kable(digit = 3)

# Display table

results_table3</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">17.547</td>
<td align="right">5.124</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">-27.036</td>
<td align="right">3.973</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">-8.171</td>
<td align="right">4.460</td>
<td align="right">0.069</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-30.619</td>
<td align="right">3.767</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">-17.282</td>
<td align="right">5.870</td>
<td align="right">0.004</td>
</tr>
<tr class="even">
<td align="left">hvi</td>
<td align="right">10.143</td>
<td align="right">1.018</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p><strong>Table 14. Statistical Results for Hospitalizations
(2016-2018)</strong></p>
<p>Here we conduct a similar analysis, however this time instead of
hospital admission data we are looking at hospitalization data. During
our exploratory analysis we found that rates of admission were less than
half of hospitalizations across all boroughs, therefore we expect the
linear regression slope to be smaller than that of adissions.The linear
regression model examines pediatric asthma hospitalization rates per
10,000 children, with the Bronx as the reference borough.</p>
<p>For the 2016-2018 time period, Queens shows the largest reduction in
hospitalizations compared to the Bronx (-30.62 visits, p &lt; 0.001),
followed by Brooklyn (-27.04 visits, p &lt; 0.001) and Staten Island
(-17.28, p = 0.004). Manhattan’s lower rate (-8.17 visits) is not
statistically significant (p = 0.069).</p>
<p>The HVI effect is significant but smaller when compared to ED visits:
each one-unit increase in HVI score is associated with an increase of
10.14 hospitalizations per 10,000 children (p &lt; 0.001). This is as
expected based on our hypothesis.</p>
</div>
<div id="period-3" class="section level4">
<h4>2019-2021 period</h4>
<pre class="r"><code># Fit linear regression model for hospitalizations (2019-2021)

fit4 = lm(zip_code_rate ~ borough + hvi, data = full_data2_hosp_4)
results_table4 = tidy(fit4) |&gt;
  select(-statistic) |&gt;
  knitr::kable(digit = 3)

# Format results table

results_table4 = tidy(fit4) |&gt;
  select(-statistic) |&gt;
  knitr::kable(digit = 3)

# Display table

results_table4</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">15.002</td>
<td align="right">3.040</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">-17.650</td>
<td align="right">2.263</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughManhattan</td>
<td align="right">-5.561</td>
<td align="right">2.618</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-19.441</td>
<td align="right">2.180</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">-13.552</td>
<td align="right">3.524</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">hvi</td>
<td align="right">5.227</td>
<td align="right">0.599</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p><strong>Table 15. Statistical Results for Hospitalizations
(2019-2021)</strong></p>
<p>For the 2019-2021 time period, Queens shows the largest reduction in
hospitalizations compared to the Bronx (-19.44 visits, p &lt; 0.001),
followed by Brooklyn (-17.65 visits, p &lt; 0.001) and Staten Island
(-13.55, p &lt; 0.001). Unlike previous models, Manhattan’s lower rate
(-5.56 visits) is now statistically significant (p = 0.035).</p>
<p>The HVI effect remains significant but shows the smallest magnitude
across all models: each one-unit increase in HVI score is associated
with an increase of 5.23 hospitalizations per 10,000 children (p &lt;
0.001).</p>
</div>
</div>
<div id="summary-of-models" class="section level3">
<h3>Summary of models</h3>
<p>Examining all four models reveals a consistent pattern: Queens shows
the lowest rates while the Bronx shows the highest, and higher HVI
scores are consistently associated with higher rates of both ED visits
and hospitalizations.</p>
</div>
<div id="model-diagnostics" class="section level3">
<h3>Model Diagnostics</h3>
<pre class="r"><code># Basic diagnostic tests for each model
# Function for basic diagnostics
basic_diagnostics = function(model, model_name) {
  # Shapiro-Wilk test for normality
  sw_test = shapiro.test(residuals(model))
  
  # Breusch-Pagan test for heteroscedasticity
  bp_test = bptest(model)
  
  # Create results
  results = data.frame(
    Model = model_name,
    Test = c(&quot;Shapiro-Wilk (Normality)&quot;, &quot;Breusch-Pagan (Heteroscedasticity)&quot;),
    Statistic = c(sw_test$statistic, bp_test$statistic),
    P_Value = c(sw_test$p.value, bp_test$p.value)
  )
  
  return(results)
}

# Run diagnostics for all models
all_diagnostics = rbind(
  basic_diagnostics(fit, &quot;ED Visits 2016-2018&quot;),
  basic_diagnostics(fit2, &quot;ED Visits 2019-2021&quot;),
  basic_diagnostics(fit3, &quot;Hospitalizations 2016-2018&quot;),
  basic_diagnostics(fit4, &quot;Hospitalizations 2019-2021&quot;)
)

# Display results
knitr::kable(all_diagnostics, digits = 4)</code></pre>
<table>
<colgroup>
<col width="4%" />
<col width="32%" />
<col width="41%" />
<col width="11%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">Model</th>
<th align="left">Test</th>
<th align="right">Statistic</th>
<th align="right">P_Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">W</td>
<td align="left">ED Visits 2016-2018</td>
<td align="left">Shapiro-Wilk (Normality)</td>
<td align="right">0.9598</td>
<td align="right">0.0001</td>
</tr>
<tr class="even">
<td align="left">BP</td>
<td align="left">ED Visits 2016-2018</td>
<td align="left">Breusch-Pagan (Heteroscedasticity)</td>
<td align="right">24.4773</td>
<td align="right">0.0002</td>
</tr>
<tr class="odd">
<td align="left">W1</td>
<td align="left">ED Visits 2019-2021</td>
<td align="left">Shapiro-Wilk (Normality)</td>
<td align="right">0.9678</td>
<td align="right">0.0006</td>
</tr>
<tr class="even">
<td align="left">BP1</td>
<td align="left">ED Visits 2019-2021</td>
<td align="left">Breusch-Pagan (Heteroscedasticity)</td>
<td align="right">24.8450</td>
<td align="right">0.0001</td>
</tr>
<tr class="odd">
<td align="left">W2</td>
<td align="left">Hospitalizations 2016-2018</td>
<td align="left">Shapiro-Wilk (Normality)</td>
<td align="right">0.9028</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">BP2</td>
<td align="left">Hospitalizations 2016-2018</td>
<td align="left">Breusch-Pagan (Heteroscedasticity)</td>
<td align="right">18.4125</td>
<td align="right">0.0025</td>
</tr>
<tr class="odd">
<td align="left">W3</td>
<td align="left">Hospitalizations 2019-2021</td>
<td align="left">Shapiro-Wilk (Normality)</td>
<td align="right">0.9769</td>
<td align="right">0.0177</td>
</tr>
<tr class="even">
<td align="left">BP3</td>
<td align="left">Hospitalizations 2019-2021</td>
<td align="left">Breusch-Pagan (Heteroscedasticity)</td>
<td align="right">26.1240</td>
<td align="right">0.0001</td>
</tr>
</tbody>
</table>
<p><strong>Table 16. Statistical Table for Model
Diagnostics</strong></p>
<p>Our diagnostic testing examined two key model assumptions using
Shapiro-Wilk tests for normality and Breusch-Pagan tests for
homoscedasticity. Results indicate statistical significance (p &lt;
0.05) for violations of both assumptions. However, with moderate to
large sample sizes (ED visits: n=171 for 2016-2018, n=168 for 2019-2021;
Hospitalizations: n=155 for 2016-2018, n=140 for 2019-2021), our models
maintain reasonable robustness to these violations. The Shapiro-Wilk
statistics (all W &gt; 0.90) suggest only mild deviations from
normality. The Breusch-Pagan tests indicate the presence of
heteroscedasticity, but this primarily affects efficiency rather than
consistency of our estimates. Therefore, while not perfect, our models
provide reliable insights into the relationships between borough
characteristics, heat vulnerability, and health outcomes.</p>
<pre class="r"><code># Basic diagnostic plots for all models

par(mfrow=c(2,2))
plot(fit, main=&quot;ED Visits 2016-2018&quot;)</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<pre class="r"><code>par(mfrow=c(2,2))
plot(fit2, main=&quot;ED Visits 2019-2021&quot;)</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-42-2.png" width="672" /></p>
<pre class="r"><code>par(mfrow=c(2,2))
plot(fit3, main=&quot;Hospitalizations 2016-2018&quot;)</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-42-3.png" width="672" /></p>
<pre class="r"><code>par(mfrow=c(2,2))
plot(fit4, main=&quot;Hospitalizations 2019-2021&quot;)</code></pre>
<p><img src="report_files/figure-html/unnamed-chunk-42-4.png" width="672" /></p>
<p><strong>Figure 16. Diagnostic Plots</strong></p>
<p>The diagnostic plots show important patterns across our models:</p>
<ul>
<li><p>QQ Plots show moderate deviations from normality, particularly in
the tails. This is most observable in the hospitalizations 2016-2018
model, where observations 68 and 71 deviate notably from the expected
normal line. However, the overall pattern seems to suggest only mild
violations of normality, for both ED visits and hospitalizations
models.</p></li>
<li><p>Residuals vs Fitted plots indicate relatively consistent spread
around zero, though with some heteroscedasticity at higher fitted
values, especially in the ED visits models. The hospitalization models
show a more consistent pattern, which would indicate a better fit for
these outcomes.</p></li>
<li><p>Scale-Location plots confirm the presence of mild
heteroscedasticity, with slightly increasing spread in the standardized
residuals as fitted values increase. This pattern is more evident in the
ED visits models than in the hospitalization models.</p></li>
<li><p>Residuals vs Leverage plots show a few potentially influential
observations (e.g., observations 75 and 76 in ED visits 2016-2018; 68
and 71 in hospitalizations 2016-2018), but none appear to exceed Cook’s
distance thresholds (dotted lines). This indicates these points do not
greatly impact our model estimates.</p></li>
</ul>
<p>While these diagnostics do appear to suggest some deviation from
model assumptions, the violations are not severe enough to invalidate
our main findings, particularly given our moderately large sample
sizes.</p>
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>Corburn, J., Osleeb, J., &amp; Porter, M. (2006). Urban asthma and
the neighbourhood environment in New York City. Health &amp; place,
12(2), 167-179.</p>
<p>Heaviside, C., Macintyre, H., &amp; Vardoulakis, S. (2017). The urban
heat island: implications for health in a changing environment. Current
environmental health reports, 4, 296-305.</p>
<p>Sheffield, P. E., Herrera, M. T., Kinnee, E. J., &amp; Clougherty, J.
E. (2018). Not so little differences: variation in hot weather risk to
young children in New York City. Public health, 161, 119–126. <a
href="https://doi.org/10.1016/j.puhe.2018.06.004"
class="uri">https://doi.org/10.1016/j.puhe.2018.06.004</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
